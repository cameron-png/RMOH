(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{10:(e,a,t)=>{"use strict";t.d(a,{$v:()=>g,EO:()=>m,Lt:()=>o,Rx:()=>f,Zr:()=>j,ck:()=>p,r7:()=>x,tv:()=>d,wd:()=>h});var r=t(5155),s=t(2115),l=t(2278),n=t(9434),i=t(285);let o=l.bL,d=l.l9,c=l.ZL,u=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.hJ,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a})});u.displayName=l.hJ.displayName;let m=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsx)(l.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]})});m.displayName=l.UC.displayName;let h=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};h.displayName="AlertDialogHeader";let p=e=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};p.displayName="AlertDialogFooter";let x=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.hE,{ref:a,className:(0,n.cn)("text-lg font-semibold",t),...s})});x.displayName=l.hE.displayName;let g=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.VY,{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",t),...s})});g.displayName=l.VY.displayName;let f=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.rc,{ref:a,className:(0,n.cn)((0,i.r)(),t),...s})});f.displayName=l.rc.displayName;let j=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.ZD,{ref:a,className:(0,n.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",t),...s})});j.displayName=l.ZD.displayName},1394:(e,a,t)=>{"use strict";t.d(a,{BK:()=>o,eu:()=>i,q5:()=>d});var r=t(5155),s=t(2115),l=t(5977),n=t(9434);let i=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.bL,{ref:a,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s})});i.displayName=l.bL.displayName;let o=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l._V,{ref:a,className:(0,n.cn)("aspect-square h-full w-full object-cover",t),...s})});o.displayName=l._V.displayName;let d=s.forwardRef((e,a)=>{let{className:t,...s}=e;return(0,r.jsx)(l.H4,{ref:a,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s})});d.displayName=l.H4.displayName},2346:(e,a,t)=>{"use strict";t.d(a,{w:()=>i});var r=t(5155),s=t(2115),l=t(7489),n=t(9434);let i=s.forwardRef((e,a)=>{let{className:t,orientation:s="horizontal",decorative:i=!0,...o}=e;return(0,r.jsx)(l.b,{ref:a,decorative:i,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",t),...o})});i.displayName=l.b.displayName},6010:()=>{},6205:(e,a,t)=>{Promise.resolve().then(t.bind(t,6736))},6736:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>L});var r=t(5155),s=t(2115),l=t(2177),n=t(221),i=t(5594),o=t(5317),d=t(858),c=t(8214),u=t(8030),m=t(7481),h=t(9737),p=t(6010),x=t(285),g=t(7759),f=t(2523),j=t(6695),y=t(2346),b=t(9409),v=t(9311),N=t(172),w=t(8763),k=t(3576),C=t(5599),R=t(7554),A=t(10),I=t(5057),P=t(1394);let B=i.Ik({name:i.Yj().min(2,{message:"Name must be at least 2 characters."}),phone:i.Yj().min(10,{message:"Please enter a valid 10-digit phone number."}).max(15,{message:"Phone number is too long."}),title:i.Yj().optional(),licenseNumber:i.Yj().optional(),brokerageName:i.Yj().optional(),defaultFormId:i.Yj().optional(),region:i.Yj().optional()});function L(){let{user:e,loading:a,refreshUserData:i}=(0,u.A)(),{toast:L}=(0,m.dj)(),[S,U]=(0,s.useState)(""),[Y,E]=(0,s.useState)([]),[F,Z]=(0,s.useState)([]),[z,D]=(0,s.useState)(!0),[T,J]=(0,s.useState)(null),M=(0,s.useRef)(null),K=(0,s.useRef)(null),_=(0,s.useRef)(null),[O,V]=(0,s.useState)(!1),[q,H]=(0,s.useState)(!1),[G,W]=(0,s.useState)(!1),[$,Q]=(0,s.useState)(null),[X,ee]=(0,s.useState)(null),[ea,et]=(0,s.useState)(null),er=(0,l.mN)({resolver:(0,n.u)(B),defaultValues:{name:"",phone:"",title:"",licenseNumber:"",brokerageName:"",defaultFormId:"",region:""}}),es=(0,s.useCallback)(async()=>{if(e){D(!0);try{let{collection:a,query:r,where:s,getDocs:l}=await Promise.resolve().then(t.bind(t,5317)),n=r(a(c.db,"feedbackForms"),s("type","==","global")),i=r(a(c.db,"feedbackForms"),s("type","==","custom"),s("userId","==",e.uid)),[o,d,u]=await Promise.all([l(n),l(i),(0,p.getGiftbitRegions)()]),m=[...o.docs.map(e=>({id:e.id,...e.data()})),...d.docs.map(e=>({id:e.id,...e.data()}))];E(m),Z(u)}catch(e){console.error("Failed to fetch initial data: ",e),L({variant:"destructive",title:"Error",description:"Could not load required data. Please refresh."})}finally{D(!1)}if(er.reset({name:e.name||"",phone:e.phone||"",title:e.title||"",licenseNumber:e.licenseNumber||"",brokerageName:e.brokerageName||"",defaultFormId:e.defaultFormId||"",region:e.region||""}),U(eo(e.phone||"")),Q(e.photoURL||null),ee(e.personalLogoUrl||null),et(e.brokerageLogoUrl||null),e.apiKey)J(e.apiKey);else{let a="ohd_sk_".concat((0,h.A)().replace(/-/g,"")),t=(0,o.H9)(c.db,"users",e.uid);await (0,o.mZ)(t,{apiKey:a}),J(a),await i()}}},[e,er,i,L]);(0,s.useEffect)(()=>{e&&es()},[e,es]);let{isDirty:el}=er.formState,en=(0,s.useMemo)(()=>$!==(null==e?void 0:e.photoURL)||X!==(null==e?void 0:e.personalLogoUrl)||ea!==(null==e?void 0:e.brokerageLogoUrl),[$,X,ea,e]),ei=el||en;(0,s.useEffect)(()=>{let e=e=>{ei&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[ei]);let eo=e=>{let a=e.replace(/\D/g,""),t="";return a.length>0&&(t="("+a.substring(0,3)),a.length>=4&&(t+=") "+a.substring(3,6)),a.length>=7&&(t+="-"+a.substring(6,10)),t},ed=e=>{U(eo(e.target.value)),er.setValue("phone",e.target.value.replace(/\D/g,""),{shouldDirty:!0})};async function ec(a){if(!e)return void L({variant:"destructive",title:"Error",description:"You must be logged in to update your profile."});try{let t=(0,o.H9)(c.db,"users",e.uid),r={name:a.name,phone:a.phone,title:a.title,licenseNumber:a.licenseNumber,brokerageName:a.brokerageName,defaultFormId:a.defaultFormId,region:a.region,photoURL:$,personalLogoUrl:X,brokerageLogoUrl:ea};await (0,o.mZ)(t,r),L({title:"Profile Updated",description:"Your information has been successfully saved."}),await i(),er.reset({...a,phone:a.phone})}catch(e){console.error("Error updating profile:",e),L({variant:"destructive",title:"Update Failed",description:"Could not save your profile. Please try again."})}}let eu=async()=>{if(e)try{let a="ohd_sk_".concat((0,h.A)().replace(/-/g,"")),t=(0,o.H9)(c.db,"users",e.uid);await (0,o.mZ)(t,{apiKey:a}),J(a),await i(),L({title:"API Key Regenerated",description:"Your new API key has been saved."})}catch(e){console.error("Error regenerating API key:",e),L({variant:"destructive",title:"Error",description:"Could not regenerate the API key."})}},em=(a,t,r)=>async s=>{if(!s.target.files||0===s.target.files.length||!e)return;let l=s.target.files[0];if(l.size>2097152)return void L({variant:"destructive",title:"File Too Large",description:"Please select a file smaller than 2MB."});let n=l.name.split(".").pop(),i="".concat((0,h.A)(),".").concat(n),o=(0,d.KR)(c.IG,"".concat(a,"/").concat(e.uid,"/").concat(i));t(!0);try{let e=await (0,d.D)(o,l),a=await (0,d.qk)(e.ref);r(a)}catch(e){console.error("Error uploading file: ",e),L({variant:"destructive",title:"Upload Failed",description:"Could not upload your image. Please try again."})}finally{t(!1)}},eh=em("profile-pictures",V,Q),ep=em("personal-logos",H,ee),ex=em("brokerage-logos",W,et);if(a)return(0,r.jsx)("p",{children:"Loading profile..."});if(!e)return(0,r.jsx)("p",{children:"Please log in to view your profile."});let eg=e=>{let{title:a,imageUrl:t,isUploading:s,onClick:l,inputRef:n,onChange:i}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:a}),(0,r.jsx)("div",{className:"flex items-center gap-4",children:(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)(P.eu,{className:"h-20 w-20 rounded-md",children:[(0,r.jsx)(P.BK,{src:t||"",alt:"".concat(a),className:"object-contain","data-ai-hint":"company logo"}),(0,r.jsx)(P.q5,{className:"rounded-md",children:(0,r.jsx)(v.A,{className:"h-8 w-8 text-muted-foreground"})})]}),(0,r.jsx)("button",{type:"button",onClick:l,disabled:s,className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-md opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:s?(0,r.jsx)(N.A,{className:"h-6 w-6 text-white animate-spin"}):(0,r.jsx)(w.A,{className:"h-6 w-6 text-white"})}),(0,r.jsx)("input",{type:"file",ref:n,onChange:i,className:"hidden",accept:"image/png, image/jpeg, image/gif"})]})})]})},ef=Array.from(new Map(F.map(e=>[e.code,e])).values());return(0,r.jsxs)("div",{className:"w-full mx-auto space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight font-headline",children:"My Profile"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Manage your personal and professional information."})]}),(0,r.jsx)(g.lV,{...er,children:(0,r.jsxs)("form",{onSubmit:er.handleSubmit(ec),children:[(0,r.jsxs)(j.Zp,{children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{children:"Your Information"}),(0,r.jsx)(j.BT,{children:"Your personal contact and licensing details."})]}),(0,r.jsxs)(j.Wu,{className:"space-y-6",children:[(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Your Photo"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsxs)(P.eu,{className:"h-20 w-20",children:[(0,r.jsx)(P.BK,{src:$||"",alt:e.name||"avatar","data-ai-hint":"person headshot",className:"object-top"}),(0,r.jsx)(P.q5,{className:"text-2xl",children:(e=>{if(!e)return"??";let a=e.split(" ");return a.length>1?(a[0][0]+a[a.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()})(e.name)})]}),(0,r.jsx)("button",{type:"button",onClick:()=>{var e;return null==(e=_.current)?void 0:e.click()},disabled:O,className:"absolute inset-0 bg-black/50 flex items-center justify-center rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",children:O?(0,r.jsx)(N.A,{className:"h-6 w-6 text-white animate-spin"}):(0,r.jsx)(w.A,{className:"h-6 w-6 text-white"})}),(0,r.jsx)("input",{type:"file",ref:_,onChange:eh,className:"hidden",accept:"image/png, image/jpeg, image/gif"})]}),(0,r.jsx)("div",{className:"flex-grow",children:(0,r.jsx)(g.zB,{control:er.control,name:"name",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Full Name"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.p,{placeholder:"John Doe",...a})}),(0,r.jsx)(g.C5,{})]})}})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Email Address"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.p,{readOnly:!0,disabled:!0,value:e.email||""})}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground pt-2",children:"Your email address cannot be changed."})]}),(0,r.jsx)(g.zB,{control:er.control,name:"phone",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Phone Number"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.p,{placeholder:"(555) 555-5555",...a,value:S,onChange:ed,maxLength:14})}),(0,r.jsx)(g.C5,{})]})}})]}),(0,r.jsx)(y.w,{}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-2",children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(g.zB,{control:er.control,name:"title",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Your Title"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.p,{placeholder:"e.g., REALTOR\xae",...a})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(g.zB,{control:er.control,name:"licenseNumber",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Your License Number"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.p,{placeholder:"e.g., #1234567",...a})}),(0,r.jsx)(g.C5,{})]})}})]}),(0,r.jsx)(eg,{title:"Your Personal Logo",imageUrl:X,isUploading:q,onClick:()=>{var e;return null==(e=M.current)?void 0:e.click()},inputRef:M,onChange:ep})]})]})]}),(0,r.jsxs)(j.Zp,{className:"mt-8",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{children:"Brokerage Information"}),(0,r.jsx)(j.BT,{children:"Your brokerage details and logo."})]}),(0,r.jsxs)(j.Wu,{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-2",children:[(0,r.jsx)(g.zB,{control:er.control,name:"brokerageName",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Brokerage Name"}),(0,r.jsx)(g.MJ,{children:(0,r.jsx)(f.p,{placeholder:"e.g., Awesome Realty Inc.",...a})}),(0,r.jsx)(g.C5,{})]})}}),(0,r.jsx)(eg,{title:"Your Brokerage Logo",imageUrl:ea,isUploading:G,onClick:()=>{var e;return null==(e=K.current)?void 0:e.click()},inputRef:K,onChange:ex})]})]}),(0,r.jsxs)(j.Zp,{className:"mt-8",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{children:"Feedback Preferences"}),(0,r.jsx)(j.BT,{children:"Customize your default feedback form for new open houses."})]}),(0,r.jsx)(j.Wu,{children:(0,r.jsx)(g.zB,{control:er.control,name:"defaultFormId",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Default Feedback Form"}),(0,r.jsxs)(b.l6,{onValueChange:a.onChange,value:a.value,children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(b.bq,{children:(0,r.jsx)(b.yv,{placeholder:"Select a default form..."})})}),(0,r.jsx)(b.gC,{children:Y.map(e=>(0,r.jsxs)(b.eb,{value:e.id,children:[e.title," ","global"===e.type&&"(Library)"]},e.id))})]}),(0,r.jsx)(g.Rr,{children:"This form will be automatically assigned to new open houses."}),(0,r.jsx)(g.C5,{})]})}})})]}),(0,r.jsxs)(j.Zp,{className:"mt-8",children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsx)(j.ZB,{children:"Gift Preferences"}),(0,r.jsx)(j.BT,{children:"Select your region to see relevant gift card brands."})]}),(0,r.jsx)(j.Wu,{children:(0,r.jsx)(g.zB,{control:er.control,name:"region",render:e=>{let{field:a}=e;return(0,r.jsxs)(g.eI,{children:[(0,r.jsx)(g.lR,{children:"Gift Card Region"}),(0,r.jsxs)(b.l6,{onValueChange:a.onChange,value:a.value,disabled:z,children:[(0,r.jsx)(g.MJ,{children:(0,r.jsx)(b.bq,{children:(0,r.jsx)(b.yv,{placeholder:z?"Loading regions...":"Select a region"})})}),(0,r.jsx)(b.gC,{children:ef.map(e=>(0,r.jsxs)(b.eb,{value:e.code,children:[e.name," (",e.currency,")"]},e.code))})]}),(0,r.jsx)(g.Rr,{children:"This sets the available brands and currency for sending gifts."}),(0,r.jsx)(g.C5,{})]})}})})]}),(0,r.jsx)("div",{className:"flex justify-end mt-8",children:(0,r.jsx)(x.$,{type:"submit",disabled:!ei||er.formState.isSubmitting||O||q||G,children:er.formState.isSubmitting?"Saving...":"Save Changes"})})]})}),(0,r.jsx)(y.w,{className:"my-8"}),(0,r.jsxs)(j.Zp,{children:[(0,r.jsxs)(j.aR,{children:[(0,r.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,r.jsx)(k.A,{})," API & Integrations"]}),(0,r.jsx)(j.BT,{children:"Use this API key to connect your account to third-party services like Zapier."})]}),(0,r.jsxs)(j.Wu,{children:[(0,r.jsx)(I.J,{htmlFor:"api-key-input",children:"Your API Key"}),(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,r.jsx)(f.p,{id:"api-key-input",readOnly:!0,value:T?"••••••••••••••••".concat(T.slice(-4)):"Generating key...",className:"font-mono bg-muted"}),(0,r.jsx)(x.$,{variant:"outline",size:"icon",onClick:()=>{T&&navigator.clipboard.writeText(T).then(()=>{L({title:"API Key Copied"})},()=>{L({variant:"destructive",title:"Copy Failed",description:"Could not copy the key. Please try again."})})},disabled:!T,children:(0,r.jsx)(C.A,{})})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:"Treat this key like a password. Do not share it publicly."})]}),(0,r.jsx)(j.wL,{className:"border-t pt-6 flex items-start justify-between flex-wrap gap-4",children:(0,r.jsxs)(A.Lt,{children:[(0,r.jsx)(A.tv,{asChild:!0,children:(0,r.jsxs)(x.$,{variant:"destructive",children:[(0,r.jsx)(R.A,{className:"mr-2"})," Regenerate Key"]})}),(0,r.jsxs)(A.EO,{children:[(0,r.jsxs)(A.wd,{children:[(0,r.jsx)(A.r7,{children:"Are you sure?"}),(0,r.jsx)(A.$v,{children:"Regenerating your API key will break any existing integrations using the old key. You will need to update them with the new key."})]}),(0,r.jsxs)(A.ck,{children:[(0,r.jsx)(A.Zr,{children:"Cancel"}),(0,r.jsx)(A.Rx,{onClick:eu,className:"bg-destructive hover:bg-destructive/90",children:"Yes, regenerate key"})]})]})]})})]})]})}},8030:(e,a,t)=>{"use strict";t.d(a,{A:()=>u,AuthProvider:()=>c});var r=t(5155),s=t(2115),l=t(3004),n=t(5317),i=t(8214),o=t(5695);let d=(0,s.createContext)(void 0);function c(e){let{children:a}=e,[t,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(0),x=(0,o.useRouter)(),g=(0,s.useCallback)(async e=>{if(!e)return null;let a=(0,n.H9)(i.db,"users",e.uid);try{let t=await (0,n.x7)(a);if(t.exists()){let a=t.data();return p(a.availableBalance||0),{...e,...a}}{console.log("User profile for ".concat(e.uid," not found, creating one."));let t={id:e.uid,email:e.email||"",name:e.displayName||"New User",phone:"",availableBalance:1e4,createdAt:n.Dc.now(),lastLoginAt:n.Dc.now()};return await (0,n.BN)(a,t,{merge:!0}),p(t.availableBalance),{...e,...t}}}catch(a){return console.error("Error fetching user profile:",a),e}},[]);(0,s.useEffect)(()=>{let e=(0,l.hg)(i.j2,async e=>{if(e){c(await g(e));let a=await e.getIdToken();await fetch("/api/auth/login",{method:"POST",headers:{Authorization:"Bearer ".concat(a)}})}else c(null),p(0),await fetch("/api/auth/logout",{method:"POST"});m(!1)});return()=>e()},[g]);let f={user:t,loading:u,availableBalance:h,refreshUserData:(0,s.useCallback)(async()=>{let e=i.j2.currentUser;e&&(m(!0),c(await g(e)),m(!1))},[g]),signIn:async(e,a,t)=>{let r=await (0,l.x9)(e,a,t),s=(0,n.H9)(i.db,"users",r.user.uid);return await (0,n.mZ)(s,{lastLoginAt:n.Dc.now()}),r},signUp:(e,a,t)=>(0,l.eJ)(e,a,t),signOut:async()=>{await (0,l.CI)(i.j2),x.push("/")},sendPasswordResetEmail:l.J1};return(0,r.jsx)(d.Provider,{value:f,children:a})}function u(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var a=a=>e(e.s=a);e.O(0,[2992,3644,1686,9035,2488,1808,5821,4434,3263,4016,8441,1684,7358],()=>a(6205)),_N_E=e.O()}]);