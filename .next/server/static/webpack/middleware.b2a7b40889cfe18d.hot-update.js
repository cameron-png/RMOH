"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_firebase_auth_edge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-firebase-auth-edge */ \"(middleware)/./node_modules/next-firebase-auth-edge/browser/next/middleware.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nconst FIREBASE_API_KEY = process.env.NEXT_PUBLIC_FIREBASE_API_KEY;\nconst FIREBASE_PROJECT_ID = process.env.FIREBASE_PROJECT_ID;\nconst FIREBASE_CLIENT_EMAIL = process.env.FIREBASE_CLIENT_EMAIL;\n// The private key is not a single-line value, so we need to process it\nconst FIREBASE_PRIVATE_KEY = process.env.FIREBASE_PRIVATE_KEY ? process.env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/g, '\\n') : undefined;\nasync function middleware(request) {\n    // If the private key is not available, we can't do server-side auth\n    // and we'll just have to let the request through and rely on client-side checks\n    if (!FIREBASE_PRIVATE_KEY) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    return (0,next_firebase_auth_edge__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(request, {\n        loginPath: '/api/auth/login',\n        logoutPath: '/api/auth/logout',\n        apiKey: FIREBASE_API_KEY,\n        cookieName: '__session',\n        cookieSignatureKeys: [\n            'secret1',\n            'secret2'\n        ],\n        cookieSerializeOptions: {\n            path: '/',\n            httpOnly: true,\n            secure: \"development\" === 'production',\n            sameSite: 'lax',\n            maxAge: 12 * 60 * 60 * 24\n        },\n        serviceAccount: {\n            projectId: FIREBASE_PROJECT_ID,\n            clientEmail: FIREBASE_CLIENT_EMAIL,\n            privateKey: FIREBASE_PRIVATE_KEY\n        },\n        handleInvalidToken: async ()=>{\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        },\n        handleError: async (error)=>{\n            console.error('Auth Middleware Error:', error.message);\n            // Fallback to redirecting to login page\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        }\n    });\n}\nconst config = {\n    matcher: [\n        '/user/:path*',\n        '/admin/:path*'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUN5RDtBQUNkO0FBRTNDLE1BQU1FLG1CQUFtQkMsUUFBUUMsR0FBRyxDQUFDQyw0QkFBNEI7QUFDakUsTUFBTUMsc0JBQXNCSCxRQUFRQyxHQUFHLENBQUNFLG1CQUFtQjtBQUMzRCxNQUFNQyx3QkFBd0JKLFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO0FBQy9ELHVFQUF1RTtBQUN2RSxNQUFNQyx1QkFBdUJMLFFBQVFDLEdBQUcsQ0FBQ0ksb0JBQW9CLEdBQ3pETCxRQUFRQyxHQUFHLENBQUNJLG9CQUFvQixDQUFDQyxPQUFPLENBQUMsUUFBUSxRQUNqREM7QUFFRyxlQUFlQyxXQUFXQyxPQUFvQjtJQUNuRCxvRUFBb0U7SUFDcEUsZ0ZBQWdGO0lBQ2hGLElBQUksQ0FBQ0osc0JBQXNCO1FBQ3pCLE9BQU9QLHFEQUFZQSxDQUFDWSxJQUFJO0lBQzFCO0lBRUEsT0FBT2IsdUVBQWNBLENBQUNZLFNBQVM7UUFDN0JFLFdBQVc7UUFDWEMsWUFBWTtRQUNaQyxRQUFRZDtRQUNSZSxZQUFZO1FBQ1pDLHFCQUFxQjtZQUNuQjtZQUNBO1NBQ0Q7UUFDREMsd0JBQXdCO1lBQ3RCQyxNQUFNO1lBQ05DLFVBQVU7WUFDVkMsUUFBUW5CLGtCQUF5QjtZQUNqQ29CLFVBQVU7WUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztRQUN6QjtRQUNBQyxnQkFBZ0I7WUFDZEMsV0FBV3BCO1lBQ1hxQixhQUFhcEI7WUFDYnFCLFlBQVlwQjtRQUNkO1FBQ0FxQixvQkFBb0I7WUFDbEIsT0FBTzVCLHFEQUFZQSxDQUFDNkIsUUFBUSxDQUFDLElBQUlDLElBQUksS0FBS25CLFFBQVFvQixHQUFHO1FBQ3ZEO1FBQ0FDLGFBQWEsT0FBT0M7WUFDbEJDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBLE1BQU1FLE9BQU87WUFDckQsd0NBQXdDO1lBQ3hDLE9BQU9uQyxxREFBWUEsQ0FBQzZCLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLEtBQUtuQixRQUFRb0IsR0FBRztRQUN2RDtJQUNGO0FBQ0Y7QUFFTyxNQUFNSyxTQUFTO0lBQ3BCQyxTQUFTO1FBQUM7UUFBZ0I7S0FBZ0I7QUFDNUMsRUFBRSIsInNvdXJjZXMiOlsiL2hvbWUvdXNlci9zdHVkaW8vc3JjL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0UmVxdWVzdCB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IGF1dGhNaWRkbGV3YXJlIH0gZnJvbSAnbmV4dC1maXJlYmFzZS1hdXRoLWVkZ2UnO1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuXG5jb25zdCBGSVJFQkFTRV9BUElfS0VZID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSE7XG5jb25zdCBGSVJFQkFTRV9QUk9KRUNUX0lEID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCE7XG5jb25zdCBGSVJFQkFTRV9DTElFTlRfRU1BSUwgPSBwcm9jZXNzLmVudi5GSVJFQkFTRV9DTElFTlRfRU1BSUwhO1xuLy8gVGhlIHByaXZhdGUga2V5IGlzIG5vdCBhIHNpbmdsZS1saW5lIHZhbHVlLCBzbyB3ZSBuZWVkIHRvIHByb2Nlc3MgaXRcbmNvbnN0IEZJUkVCQVNFX1BSSVZBVEVfS0VZID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVlcbiAgPyBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWS5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJylcbiAgOiB1bmRlZmluZWQ7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIC8vIElmIHRoZSBwcml2YXRlIGtleSBpcyBub3QgYXZhaWxhYmxlLCB3ZSBjYW4ndCBkbyBzZXJ2ZXItc2lkZSBhdXRoXG4gIC8vIGFuZCB3ZSdsbCBqdXN0IGhhdmUgdG8gbGV0IHRoZSByZXF1ZXN0IHRocm91Z2ggYW5kIHJlbHkgb24gY2xpZW50LXNpZGUgY2hlY2tzXG4gIGlmICghRklSRUJBU0VfUFJJVkFURV9LRVkpIHtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLm5leHQoKTtcbiAgfVxuXG4gIHJldHVybiBhdXRoTWlkZGxld2FyZShyZXF1ZXN0LCB7XG4gICAgbG9naW5QYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICBsb2dvdXRQYXRoOiAnL2FwaS9hdXRoL2xvZ291dCcsXG4gICAgYXBpS2V5OiBGSVJFQkFTRV9BUElfS0VZLFxuICAgIGNvb2tpZU5hbWU6ICdfX3Nlc3Npb24nLFxuICAgIGNvb2tpZVNpZ25hdHVyZUtleXM6IFtcbiAgICAgICdzZWNyZXQxJyxcbiAgICAgICdzZWNyZXQyJyxcbiAgICBdLFxuICAgIGNvb2tpZVNlcmlhbGl6ZU9wdGlvbnM6IHtcbiAgICAgIHBhdGg6ICcvJyxcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgbWF4QWdlOiAxMiAqIDYwICogNjAgKiAyNCwgLy8gMTIgZGF5c1xuICAgIH0sXG4gICAgc2VydmljZUFjY291bnQ6IHtcbiAgICAgIHByb2plY3RJZDogRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgICAgIGNsaWVudEVtYWlsOiBGSVJFQkFTRV9DTElFTlRfRU1BSUwsXG4gICAgICBwcml2YXRlS2V5OiBGSVJFQkFTRV9QUklWQVRFX0tFWSxcbiAgICB9LFxuICAgIGhhbmRsZUludmFsaWRUb2tlbjogYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvJywgcmVxdWVzdC51cmwpKTtcbiAgICB9LFxuICAgIGhhbmRsZUVycm9yOiBhc3luYyAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggTWlkZGxld2FyZSBFcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHJlZGlyZWN0aW5nIHRvIGxvZ2luIHBhZ2VcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnLycsIHJlcXVlc3QudXJsKSk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFsnL3VzZXIvOnBhdGgqJywgJy9hZG1pbi86cGF0aConXSxcbn07XG4iXSwibmFtZXMiOlsiYXV0aE1pZGRsZXdhcmUiLCJOZXh0UmVzcG9uc2UiLCJGSVJFQkFTRV9BUElfS0VZIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkiLCJGSVJFQkFTRV9QUk9KRUNUX0lEIiwiRklSRUJBU0VfQ0xJRU5UX0VNQUlMIiwiRklSRUJBU0VfUFJJVkFURV9LRVkiLCJyZXBsYWNlIiwidW5kZWZpbmVkIiwibWlkZGxld2FyZSIsInJlcXVlc3QiLCJuZXh0IiwibG9naW5QYXRoIiwibG9nb3V0UGF0aCIsImFwaUtleSIsImNvb2tpZU5hbWUiLCJjb29raWVTaWduYXR1cmVLZXlzIiwiY29va2llU2VyaWFsaXplT3B0aW9ucyIsInBhdGgiLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwibWF4QWdlIiwic2VydmljZUFjY291bnQiLCJwcm9qZWN0SWQiLCJjbGllbnRFbWFpbCIsInByaXZhdGVLZXkiLCJoYW5kbGVJbnZhbGlkVG9rZW4iLCJyZWRpcmVjdCIsIlVSTCIsInVybCIsImhhbmRsZUVycm9yIiwiZXJyb3IiLCJjb25zb2xlIiwibWVzc2FnZSIsImNvbmZpZyIsIm1hdGNoZXIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});