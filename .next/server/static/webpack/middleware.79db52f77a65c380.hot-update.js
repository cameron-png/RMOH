"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_firebase_auth_edge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-firebase-auth-edge */ \"(middleware)/./node_modules/next-firebase-auth-edge/browser/next/middleware.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nconst FIREBASE_API_KEY = process.env.NEXT_PUBLIC_FIREBASE_API_KEY;\nconst FIREBASE_PROJECT_ID = process.env.FIREBASE_PROJECT_ID;\nconst FIREBASE_CLIENT_EMAIL = process.env.FIREBASE_CLIENT_EMAIL;\n// The private key is not a single-line value, so we need to process it\nconst FIREBASE_PRIVATE_KEY = process.env.FIREBASE_PRIVATE_KEY ? process.env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/g, '\\n') : undefined;\nasync function middleware(request) {\n    // If the private key is not available, we can't do server-side auth\n    // and we'll just have to let the request through and rely on client-side checks\n    if (!FIREBASE_PRIVATE_KEY) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Explicitly bypass middleware for public visitor pages\n    if (request.nextUrl.pathname.startsWith('/v/')) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    return (0,next_firebase_auth_edge__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(request, {\n        loginPath: '/api/auth/login',\n        logoutPath: '/api/auth/logout',\n        apiKey: FIREBASE_API_KEY,\n        cookieName: '__session',\n        cookieSignatureKeys: [\n            'secret1',\n            'secret2'\n        ],\n        cookieSerializeOptions: {\n            path: '/',\n            httpOnly: true,\n            secure: \"development\" === 'production',\n            sameSite: 'lax',\n            maxAge: 12 * 60 * 60 * 24\n        },\n        serviceAccount: {\n            projectId: FIREBASE_PROJECT_ID,\n            clientEmail: FIREBASE_CLIENT_EMAIL,\n            privateKey: FIREBASE_PRIVATE_KEY\n        },\n        handleInvalidToken: async ()=>{\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        },\n        handleError: async (error)=>{\n            console.error('Auth Middleware Error:', error.message);\n            // Fallback to redirecting to login page\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        }\n    });\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - v (public visitor pages)\n     */ '/((?!api|_next/static|_next/image|favicon.ico|v).*)',\n        '/user/:path*',\n        '/admin/:path*'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUV5RDtBQUNkO0FBRTNDLE1BQU1FLG1CQUFtQkMsUUFBUUMsR0FBRyxDQUFDQyw0QkFBNEI7QUFDakUsTUFBTUMsc0JBQXNCSCxRQUFRQyxHQUFHLENBQUNFLG1CQUFtQjtBQUMzRCxNQUFNQyx3QkFBd0JKLFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO0FBQy9ELHVFQUF1RTtBQUN2RSxNQUFNQyx1QkFBdUJMLFFBQVFDLEdBQUcsQ0FBQ0ksb0JBQW9CLEdBQ3pETCxRQUFRQyxHQUFHLENBQUNJLG9CQUFvQixDQUFDQyxPQUFPLENBQUMsUUFBUSxRQUNqREM7QUFFRyxlQUFlQyxXQUFXQyxPQUFvQjtJQUNuRCxvRUFBb0U7SUFDcEUsZ0ZBQWdGO0lBQ2hGLElBQUksQ0FBQ0osc0JBQXNCO1FBQ3pCLE9BQU9QLHFEQUFZQSxDQUFDWSxJQUFJO0lBQzFCO0lBRUEsd0RBQXdEO0lBQ3hELElBQUlELFFBQVFFLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsUUFBUTtRQUM5QyxPQUFPZixxREFBWUEsQ0FBQ1ksSUFBSTtJQUMxQjtJQUdBLE9BQU9iLHVFQUFjQSxDQUFDWSxTQUFTO1FBQzdCSyxXQUFXO1FBQ1hDLFlBQVk7UUFDWkMsUUFBUWpCO1FBQ1JrQixZQUFZO1FBQ1pDLHFCQUFxQjtZQUNuQjtZQUNBO1NBQ0Q7UUFDREMsd0JBQXdCO1lBQ3RCQyxNQUFNO1lBQ05DLFVBQVU7WUFDVkMsUUFBUXRCLGtCQUF5QjtZQUNqQ3VCLFVBQVU7WUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztRQUN6QjtRQUNBQyxnQkFBZ0I7WUFDZEMsV0FBV3ZCO1lBQ1h3QixhQUFhdkI7WUFDYndCLFlBQVl2QjtRQUNkO1FBQ0F3QixvQkFBb0I7WUFDbEIsT0FBTy9CLHFEQUFZQSxDQUFDZ0MsUUFBUSxDQUFDLElBQUlDLElBQUksS0FBS3RCLFFBQVF1QixHQUFHO1FBQ3ZEO1FBQ0FDLGFBQWEsT0FBT0M7WUFDbEJDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBLE1BQU1FLE9BQU87WUFDckQsd0NBQXdDO1lBQ3hDLE9BQU90QyxxREFBWUEsQ0FBQ2dDLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLEtBQUt0QixRQUFRdUIsR0FBRztRQUN2RDtJQUNGO0FBQ0Y7QUFFTyxNQUFNSyxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7Ozs7S0FPQyxHQUNEO1FBQ0E7UUFDQTtLQUNEO0FBQ0gsRUFBRSIsInNvdXJjZXMiOlsiL2hvbWUvdXNlci9zdHVkaW8vc3JjL21pZGRsZXdhcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXG5pbXBvcnQgdHlwZSB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgYXV0aE1pZGRsZXdhcmUgfSBmcm9tICduZXh0LWZpcmViYXNlLWF1dGgtZWRnZSc7XG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbmNvbnN0IEZJUkVCQVNFX0FQSV9LRVkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19GSVJFQkFTRV9BUElfS0VZITtcbmNvbnN0IEZJUkVCQVNFX1BST0pFQ1RfSUQgPSBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUk9KRUNUX0lEITtcbmNvbnN0IEZJUkVCQVNFX0NMSUVOVF9FTUFJTCA9IHByb2Nlc3MuZW52LkZJUkVCQVNFX0NMSUVOVF9FTUFJTCE7XG4vLyBUaGUgcHJpdmF0ZSBrZXkgaXMgbm90IGEgc2luZ2xlLWxpbmUgdmFsdWUsIHNvIHdlIG5lZWQgdG8gcHJvY2VzcyBpdFxuY29uc3QgRklSRUJBU0VfUFJJVkFURV9LRVkgPSBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWVxuICA/IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICA6IHVuZGVmaW5lZDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgLy8gSWYgdGhlIHByaXZhdGUga2V5IGlzIG5vdCBhdmFpbGFibGUsIHdlIGNhbid0IGRvIHNlcnZlci1zaWRlIGF1dGhcbiAgLy8gYW5kIHdlJ2xsIGp1c3QgaGF2ZSB0byBsZXQgdGhlIHJlcXVlc3QgdGhyb3VnaCBhbmQgcmVseSBvbiBjbGllbnQtc2lkZSBjaGVja3NcbiAgaWYgKCFGSVJFQkFTRV9QUklWQVRFX0tFWSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICB9XG5cbiAgLy8gRXhwbGljaXRseSBieXBhc3MgbWlkZGxld2FyZSBmb3IgcHVibGljIHZpc2l0b3IgcGFnZXNcbiAgaWYgKHJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvdi8nKSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCgpO1xuICB9XG4gIFxuXG4gIHJldHVybiBhdXRoTWlkZGxld2FyZShyZXF1ZXN0LCB7XG4gICAgbG9naW5QYXRoOiAnL2FwaS9hdXRoL2xvZ2luJyxcbiAgICBsb2dvdXRQYXRoOiAnL2FwaS9hdXRoL2xvZ291dCcsXG4gICAgYXBpS2V5OiBGSVJFQkFTRV9BUElfS0VZLFxuICAgIGNvb2tpZU5hbWU6ICdfX3Nlc3Npb24nLFxuICAgIGNvb2tpZVNpZ25hdHVyZUtleXM6IFtcbiAgICAgICdzZWNyZXQxJyxcbiAgICAgICdzZWNyZXQyJyxcbiAgICBdLFxuICAgIGNvb2tpZVNlcmlhbGl6ZU9wdGlvbnM6IHtcbiAgICAgIHBhdGg6ICcvJyxcbiAgICAgIGh0dHBPbmx5OiB0cnVlLFxuICAgICAgc2VjdXJlOiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nLFxuICAgICAgc2FtZVNpdGU6ICdsYXgnLFxuICAgICAgbWF4QWdlOiAxMiAqIDYwICogNjAgKiAyNCwgLy8gMTIgZGF5c1xuICAgIH0sXG4gICAgc2VydmljZUFjY291bnQ6IHtcbiAgICAgIHByb2plY3RJZDogRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgICAgIGNsaWVudEVtYWlsOiBGSVJFQkFTRV9DTElFTlRfRU1BSUwsXG4gICAgICBwcml2YXRlS2V5OiBGSVJFQkFTRV9QUklWQVRFX0tFWSxcbiAgICB9LFxuICAgIGhhbmRsZUludmFsaWRUb2tlbjogYXN5bmMgKCkgPT4ge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChuZXcgVVJMKCcvJywgcmVxdWVzdC51cmwpKTtcbiAgICB9LFxuICAgIGhhbmRsZUVycm9yOiBhc3luYyAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0F1dGggTWlkZGxld2FyZSBFcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEZhbGxiYWNrIHRvIHJlZGlyZWN0aW5nIHRvIGxvZ2luIHBhZ2VcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnLycsIHJlcXVlc3QudXJsKSk7XG4gICAgfSxcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIG1hdGNoZXI6IFtcbiAgICAvKlxuICAgICAqIE1hdGNoIGFsbCByZXF1ZXN0IHBhdGhzIGV4Y2VwdCBmb3IgdGhlIG9uZXMgc3RhcnRpbmcgd2l0aDpcbiAgICAgKiAtIGFwaSAoQVBJIHJvdXRlcylcbiAgICAgKiAtIF9uZXh0L3N0YXRpYyAoc3RhdGljIGZpbGVzKVxuICAgICAqIC0gX25leHQvaW1hZ2UgKGltYWdlIG9wdGltaXphdGlvbiBmaWxlcylcbiAgICAgKiAtIGZhdmljb24uaWNvIChmYXZpY29uIGZpbGUpXG4gICAgICogLSB2IChwdWJsaWMgdmlzaXRvciBwYWdlcylcbiAgICAgKi9cbiAgICAnLygoPyFhcGl8X25leHQvc3RhdGljfF9uZXh0L2ltYWdlfGZhdmljb24uaWNvfHYpLiopJyxcbiAgICAnL3VzZXIvOnBhdGgqJywgXG4gICAgJy9hZG1pbi86cGF0aConXG4gIF0sXG59O1xuIl0sIm5hbWVzIjpbImF1dGhNaWRkbGV3YXJlIiwiTmV4dFJlc3BvbnNlIiwiRklSRUJBU0VfQVBJX0tFWSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19GSVJFQkFTRV9BUElfS0VZIiwiRklSRUJBU0VfUFJPSkVDVF9JRCIsIkZJUkVCQVNFX0NMSUVOVF9FTUFJTCIsIkZJUkVCQVNFX1BSSVZBVEVfS0VZIiwicmVwbGFjZSIsInVuZGVmaW5lZCIsIm1pZGRsZXdhcmUiLCJyZXF1ZXN0IiwibmV4dCIsIm5leHRVcmwiLCJwYXRobmFtZSIsInN0YXJ0c1dpdGgiLCJsb2dpblBhdGgiLCJsb2dvdXRQYXRoIiwiYXBpS2V5IiwiY29va2llTmFtZSIsImNvb2tpZVNpZ25hdHVyZUtleXMiLCJjb29raWVTZXJpYWxpemVPcHRpb25zIiwicGF0aCIsImh0dHBPbmx5Iiwic2VjdXJlIiwic2FtZVNpdGUiLCJtYXhBZ2UiLCJzZXJ2aWNlQWNjb3VudCIsInByb2plY3RJZCIsImNsaWVudEVtYWlsIiwicHJpdmF0ZUtleSIsImhhbmRsZUludmFsaWRUb2tlbiIsInJlZGlyZWN0IiwiVVJMIiwidXJsIiwiaGFuZGxlRXJyb3IiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwiY29uZmlnIiwibWF0Y2hlciJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});