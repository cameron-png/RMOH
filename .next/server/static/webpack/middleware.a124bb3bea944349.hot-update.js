"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./src/middleware.ts":
/*!***************************!*\
  !*** ./src/middleware.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var next_firebase_auth_edge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-firebase-auth-edge */ \"(middleware)/./node_modules/next-firebase-auth-edge/browser/next/middleware.js\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(middleware)/./node_modules/next/dist/esm/api/server.js\");\n\n\nconst FIREBASE_API_KEY = process.env.NEXT_PUBLIC_FIREBASE_API_KEY;\nconst FIREBASE_PROJECT_ID = process.env.FIREBASE_PROJECT_ID;\nconst FIREBASE_CLIENT_EMAIL = process.env.FIREBASE_CLIENT_EMAIL;\n// The private key is not a single-line value, so we need to process it\nconst FIREBASE_PRIVATE_KEY = process.env.FIREBASE_PRIVATE_KEY ? process.env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/g, '\\n') : undefined;\nasync function middleware(request) {\n    // If the private key is not available, we can't do server-side auth\n    // and we'll just have to let the request through and rely on client-side checks\n    if (!FIREBASE_PRIVATE_KEY) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Explicitly bypass middleware for public visitor pages\n    if (request.nextUrl.pathname.startsWith('/v/')) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    // Also bypass for login, signup, and forgot password pages\n    const publicPaths = [\n        '/',\n        '/signup',\n        '/forgot-password'\n    ];\n    if (publicPaths.includes(request.nextUrl.pathname) || request.nextUrl.pathname.startsWith('/signup/')) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next();\n    }\n    return (0,next_firebase_auth_edge__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(request, {\n        loginPath: '/api/auth/login',\n        logoutPath: '/api/auth/logout',\n        apiKey: FIREBASE_API_KEY,\n        cookieName: '__session',\n        cookieSignatureKeys: [\n            'secret1',\n            'secret2'\n        ],\n        cookieSerializeOptions: {\n            path: '/',\n            httpOnly: true,\n            secure: \"development\" === 'production',\n            sameSite: 'lax',\n            maxAge: 12 * 60 * 60 * 24\n        },\n        serviceAccount: {\n            projectId: FIREBASE_PROJECT_ID,\n            clientEmail: FIREBASE_CLIENT_EMAIL,\n            privateKey: FIREBASE_PRIVATE_KEY\n        },\n        handleInvalidToken: async ()=>{\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        },\n        handleError: async (error)=>{\n            console.error('Auth Middleware Error:', error.message);\n            // Fallback to redirecting to login page\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.redirect(new URL('/', request.url));\n        }\n    });\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - api (API routes)\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * - v (public visitor pages which are handled above)\n     */ '/((?!api|_next/static|_next/image|favicon.ico).*)'\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vc3JjL21pZGRsZXdhcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUV5RDtBQUNkO0FBRTNDLE1BQU1FLG1CQUFtQkMsUUFBUUMsR0FBRyxDQUFDQyw0QkFBNEI7QUFDakUsTUFBTUMsc0JBQXNCSCxRQUFRQyxHQUFHLENBQUNFLG1CQUFtQjtBQUMzRCxNQUFNQyx3QkFBd0JKLFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO0FBQy9ELHVFQUF1RTtBQUN2RSxNQUFNQyx1QkFBdUJMLFFBQVFDLEdBQUcsQ0FBQ0ksb0JBQW9CLEdBQ3pETCxRQUFRQyxHQUFHLENBQUNJLG9CQUFvQixDQUFDQyxPQUFPLENBQUMsUUFBUSxRQUNqREM7QUFFRyxlQUFlQyxXQUFXQyxPQUFvQjtJQUNuRCxvRUFBb0U7SUFDcEUsZ0ZBQWdGO0lBQ2hGLElBQUksQ0FBQ0osc0JBQXNCO1FBQ3pCLE9BQU9QLHFEQUFZQSxDQUFDWSxJQUFJO0lBQzFCO0lBRUEsd0RBQXdEO0lBQ3hELElBQUlELFFBQVFFLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsUUFBUTtRQUM5QyxPQUFPZixxREFBWUEsQ0FBQ1ksSUFBSTtJQUMxQjtJQUVBLDJEQUEyRDtJQUMzRCxNQUFNSSxjQUFjO1FBQUM7UUFBSztRQUFXO0tBQW1CO0lBQ3hELElBQUlBLFlBQVlDLFFBQVEsQ0FBQ04sUUFBUUUsT0FBTyxDQUFDQyxRQUFRLEtBQUtILFFBQVFFLE9BQU8sQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUMsYUFBYTtRQUNuRyxPQUFPZixxREFBWUEsQ0FBQ1ksSUFBSTtJQUM1QjtJQUVBLE9BQU9iLHVFQUFjQSxDQUFDWSxTQUFTO1FBQzdCTyxXQUFXO1FBQ1hDLFlBQVk7UUFDWkMsUUFBUW5CO1FBQ1JvQixZQUFZO1FBQ1pDLHFCQUFxQjtZQUNuQjtZQUNBO1NBQ0Q7UUFDREMsd0JBQXdCO1lBQ3RCQyxNQUFNO1lBQ05DLFVBQVU7WUFDVkMsUUFBUXhCLGtCQUF5QjtZQUNqQ3lCLFVBQVU7WUFDVkMsUUFBUSxLQUFLLEtBQUssS0FBSztRQUN6QjtRQUNBQyxnQkFBZ0I7WUFDZEMsV0FBV3pCO1lBQ1gwQixhQUFhekI7WUFDYjBCLFlBQVl6QjtRQUNkO1FBQ0EwQixvQkFBb0I7WUFDbEIsT0FBT2pDLHFEQUFZQSxDQUFDa0MsUUFBUSxDQUFDLElBQUlDLElBQUksS0FBS3hCLFFBQVF5QixHQUFHO1FBQ3ZEO1FBQ0FDLGFBQWEsT0FBT0M7WUFDbEJDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBLE1BQU1FLE9BQU87WUFDckQsd0NBQXdDO1lBQ3hDLE9BQU94QyxxREFBWUEsQ0FBQ2tDLFFBQVEsQ0FBQyxJQUFJQyxJQUFJLEtBQUt4QixRQUFReUIsR0FBRztRQUN2RDtJQUNGO0FBQ0Y7QUFFTyxNQUFNSyxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7Ozs7S0FPQyxHQUNEO0tBQ0Q7QUFDSCxFQUFFIiwic291cmNlcyI6WyIvaG9tZS91c2VyL3N0dWRpby9zcmMvbWlkZGxld2FyZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbmltcG9ydCB0eXBlIHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBhdXRoTWlkZGxld2FyZSB9IGZyb20gJ25leHQtZmlyZWJhc2UtYXV0aC1lZGdlJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuY29uc3QgRklSRUJBU0VfQVBJX0tFWSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0ZJUkVCQVNFX0FQSV9LRVkhO1xuY29uc3QgRklSRUJBU0VfUFJPSkVDVF9JRCA9IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQhO1xuY29uc3QgRklSRUJBU0VfQ0xJRU5UX0VNQUlMID0gcHJvY2Vzcy5lbnYuRklSRUJBU0VfQ0xJRU5UX0VNQUlMITtcbi8vIFRoZSBwcml2YXRlIGtleSBpcyBub3QgYSBzaW5nbGUtbGluZSB2YWx1ZSwgc28gd2UgbmVlZCB0byBwcm9jZXNzIGl0XG5jb25zdCBGSVJFQkFTRV9QUklWQVRFX0tFWSA9IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZXG4gID8gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVkucmVwbGFjZSgvXFxcXG4vZywgJ1xcbicpXG4gIDogdW5kZWZpbmVkO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWlkZGxld2FyZShyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICAvLyBJZiB0aGUgcHJpdmF0ZSBrZXkgaXMgbm90IGF2YWlsYWJsZSwgd2UgY2FuJ3QgZG8gc2VydmVyLXNpZGUgYXV0aFxuICAvLyBhbmQgd2UnbGwganVzdCBoYXZlIHRvIGxldCB0aGUgcmVxdWVzdCB0aHJvdWdoIGFuZCByZWx5IG9uIGNsaWVudC1zaWRlIGNoZWNrc1xuICBpZiAoIUZJUkVCQVNFX1BSSVZBVEVfS0VZKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIH1cblxuICAvLyBFeHBsaWNpdGx5IGJ5cGFzcyBtaWRkbGV3YXJlIGZvciBwdWJsaWMgdmlzaXRvciBwYWdlc1xuICBpZiAocmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy92LycpKSB7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIH1cbiAgXG4gIC8vIEFsc28gYnlwYXNzIGZvciBsb2dpbiwgc2lnbnVwLCBhbmQgZm9yZ290IHBhc3N3b3JkIHBhZ2VzXG4gIGNvbnN0IHB1YmxpY1BhdGhzID0gWycvJywgJy9zaWdudXAnLCAnL2ZvcmdvdC1wYXNzd29yZCddO1xuICBpZiAocHVibGljUGF0aHMuaW5jbHVkZXMocmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lKSB8fCByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL3NpZ251cC8nKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5uZXh0KCk7XG4gIH1cblxuICByZXR1cm4gYXV0aE1pZGRsZXdhcmUocmVxdWVzdCwge1xuICAgIGxvZ2luUGF0aDogJy9hcGkvYXV0aC9sb2dpbicsXG4gICAgbG9nb3V0UGF0aDogJy9hcGkvYXV0aC9sb2dvdXQnLFxuICAgIGFwaUtleTogRklSRUJBU0VfQVBJX0tFWSxcbiAgICBjb29raWVOYW1lOiAnX19zZXNzaW9uJyxcbiAgICBjb29raWVTaWduYXR1cmVLZXlzOiBbXG4gICAgICAnc2VjcmV0MScsXG4gICAgICAnc2VjcmV0MicsXG4gICAgXSxcbiAgICBjb29raWVTZXJpYWxpemVPcHRpb25zOiB7XG4gICAgICBwYXRoOiAnLycsXG4gICAgICBodHRwT25seTogdHJ1ZSxcbiAgICAgIHNlY3VyZTogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJyxcbiAgICAgIHNhbWVTaXRlOiAnbGF4JyxcbiAgICAgIG1heEFnZTogMTIgKiA2MCAqIDYwICogMjQsIC8vIDEyIGRheXNcbiAgICB9LFxuICAgIHNlcnZpY2VBY2NvdW50OiB7XG4gICAgICBwcm9qZWN0SWQ6IEZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gICAgICBjbGllbnRFbWFpbDogRklSRUJBU0VfQ0xJRU5UX0VNQUlMLFxuICAgICAgcHJpdmF0ZUtleTogRklSRUJBU0VfUFJJVkFURV9LRVksXG4gICAgfSxcbiAgICBoYW5kbGVJbnZhbGlkVG9rZW46IGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QobmV3IFVSTCgnLycsIHJlcXVlc3QudXJsKSk7XG4gICAgfSxcbiAgICBoYW5kbGVFcnJvcjogYXN5bmMgKGVycm9yKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdBdXRoIE1pZGRsZXdhcmUgRXJyb3I6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICAvLyBGYWxsYmFjayB0byByZWRpcmVjdGluZyB0byBsb2dpbiBwYWdlXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KG5ldyBVUkwoJy8nLCByZXF1ZXN0LnVybCkpO1xuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLypcbiAgICAgKiBNYXRjaCBhbGwgcmVxdWVzdCBwYXRocyBleGNlcHQgZm9yIHRoZSBvbmVzIHN0YXJ0aW5nIHdpdGg6XG4gICAgICogLSBhcGkgKEFQSSByb3V0ZXMpXG4gICAgICogLSBfbmV4dC9zdGF0aWMgKHN0YXRpYyBmaWxlcylcbiAgICAgKiAtIF9uZXh0L2ltYWdlIChpbWFnZSBvcHRpbWl6YXRpb24gZmlsZXMpXG4gICAgICogLSBmYXZpY29uLmljbyAoZmF2aWNvbiBmaWxlKVxuICAgICAqIC0gdiAocHVibGljIHZpc2l0b3IgcGFnZXMgd2hpY2ggYXJlIGhhbmRsZWQgYWJvdmUpXG4gICAgICovXG4gICAgJy8oKD8hYXBpfF9uZXh0L3N0YXRpY3xfbmV4dC9pbWFnZXxmYXZpY29uLmljbykuKiknLFxuICBdLFxufTtcbiJdLCJuYW1lcyI6WyJhdXRoTWlkZGxld2FyZSIsIk5leHRSZXNwb25zZSIsIkZJUkVCQVNFX0FQSV9LRVkiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfRklSRUJBU0VfQVBJX0tFWSIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJGSVJFQkFTRV9DTElFTlRfRU1BSUwiLCJGSVJFQkFTRV9QUklWQVRFX0tFWSIsInJlcGxhY2UiLCJ1bmRlZmluZWQiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsIm5leHQiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwicHVibGljUGF0aHMiLCJpbmNsdWRlcyIsImxvZ2luUGF0aCIsImxvZ291dFBhdGgiLCJhcGlLZXkiLCJjb29raWVOYW1lIiwiY29va2llU2lnbmF0dXJlS2V5cyIsImNvb2tpZVNlcmlhbGl6ZU9wdGlvbnMiLCJwYXRoIiwiaHR0cE9ubHkiLCJzZWN1cmUiLCJzYW1lU2l0ZSIsIm1heEFnZSIsInNlcnZpY2VBY2NvdW50IiwicHJvamVjdElkIiwiY2xpZW50RW1haWwiLCJwcml2YXRlS2V5IiwiaGFuZGxlSW52YWxpZFRva2VuIiwicmVkaXJlY3QiLCJVUkwiLCJ1cmwiLCJoYW5kbGVFcnJvciIsImVycm9yIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJjb25maWciLCJtYXRjaGVyIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./src/middleware.ts\n");

/***/ })

});