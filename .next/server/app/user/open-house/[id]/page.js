(()=>{var e={};e.id=594,e.ids=[594],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5272:(e,s,t)=>{Promise.resolve().then(t.bind(t,93013))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},18329:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21631:(e,s,t)=>{Promise.resolve().then(t.bind(t,95082))},21820:e=>{"use strict";e.exports=require("os")},24026:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35137:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},35265:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},37366:e=>{"use strict";e.exports=require("dns")},48827:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/user/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/user/layout.tsx","default")},52682:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/user/open-house/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/user/open-house/[id]/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55817:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},57207:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,s,t)=>{"use strict";t.d(s,{Cf:()=>h,Es:()=>x,L3:()=>p,c7:()=>m,lG:()=>o,rr:()=>f,zM:()=>d});var r=t(60687),a=t(43210),i=t(10991),l=t(78726),n=t(4780);let o=i.bL,d=i.l9,c=i.ZL;i.bm;let u=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));u.displayName=i.hJ.displayName;let h=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(i.UC,{ref:a,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,r.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));h.displayName=i.UC.displayName;let m=({className:e,...s})=>(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});m.displayName="DialogHeader";let x=({className:e,...s})=>(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});x.displayName="DialogFooter";let p=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));p.displayName=i.hE.displayName;let f=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(i.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=i.VY.displayName},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},74112:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(55511),a=t.n(r);let i={randomUUID:a().randomUUID},l=new Uint8Array(256),n=l.length,o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let d=function(e,s,t){if(i.randomUUID&&!s&&!e)return i.randomUUID();let r=(e=e||{}).random||(e.rng||function(){return n>l.length-16&&(a().randomFillSync(l),n=0),l.slice(n,n+=16)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,s){t=t||0;for(let e=0;e<16;++e)s[t+e]=r[e];return s}return function(e,s=0){return o[e[s+0]]+o[e[s+1]]+o[e[s+2]]+o[e[s+3]]+"-"+o[e[s+4]]+o[e[s+5]]+"-"+o[e[s+6]]+o[e[s+7]]+"-"+o[e[s+8]]+o[e[s+9]]+"-"+o[e[s+10]]+o[e[s+11]]+o[e[s+12]]+o[e[s+13]]+o[e[s+14]]+o[e[s+15]]}(r)}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83724:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=t(65239),a=t(48088),i=t(88170),l=t.n(i),n=t(30893),o={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(s,o);let d={children:["",{children:["user",{children:["open-house",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,52682)),"/home/user/studio/src/app/user/open-house/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,48827)),"/home/user/studio/src/app/user/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,61137)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/user/open-house/[id]/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/user/open-house/[id]/page",pathname:"/user/open-house/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},91367:(e,s,t)=>{Promise.resolve().then(t.bind(t,52682))},91645:e=>{"use strict";e.exports=require("net")},93013:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(60687);t(43210);var a=t(16189),i=t(68504),l=t(33870),n=t(76113),o=t(96556),d=t(29523),c=t(30474),u=t(85814),h=t.n(u);function m({children:e}){let{user:s,loading:t}=(0,i.A)();return((0,a.useRouter)(),t||!s)?(0,r.jsx)("div",{className:"flex min-h-screen w-full flex-col items-center justify-center bg-background",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Verifying authentication..."})}):(0,r.jsx)(l.GB,{children:(0,r.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,r.jsx)(n.z,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-sidebar px-4 sm:h-auto sm:border-0 sm:bg-transparent sm:px-6 md:hidden",children:[(0,r.jsx)(l.x2,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"ghost",size:"icon",className:"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,r.jsx)(h(),{href:"/user/dashboard",className:"flex items-center gap-2 text-lg font-semibold md:text-base font-headline text-sidebar-foreground",children:(0,r.jsx)(c.default,{src:"https://firebasestorage.googleapis.com/v0/b/openhouse-dashboard.firebasestorage.app/o/RMOHbug%20white.png?alt=media",alt:"RateMyOpenHouse.com Logo",width:150,height:40,className:"w-auto h-8","data-ai-hint":"app logo white"})})]}),(0,r.jsx)("main",{className:"flex-1 p-4 sm:p-6",children:e}),(0,r.jsx)("footer",{className:"py-4 px-6 mt-auto",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(c.default,{src:"https://firebasestorage.googleapis.com/v0/b/openhouse-dashboard.firebasestorage.app/o/RMOHbug.png?alt=media",alt:"RateMyOpenHouse.com Icon",width:40,height:40,className:"h-8 w-auto opacity-50","data-ai-hint":"app icon"})})})]})]})})}},94735:e=>{"use strict";e.exports=require("events")},95082:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>O});var r=t(60687),a=t(43210),i=t(75535),l=t(70146),n=t(50944),o=t(68504),d=t(16189),c=t(30474),u=t(85814),h=t.n(u),m=t(27605),x=t(45880),p=t(63442),f=t(74112),g=t(44493),j=t(29523),b=t(29867),v=t(82614);let y=(0,v.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var N=t(58893),w=t(55817),k=t(24026),A=t(11516);let C=(0,v.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var R=t(57207),q=t(35137),S=t(48206),M=t(18329),H=t(13972),z=t(63503),I=t(35950),U=t(96834),P=t(15079),E=t(4780),Z=t(35265);function $({forms:e,selectedFormId:s,onFormSelect:t,triggerClassName:i}){let l=(0,d.useRouter)(),{globalForms:n,customForms:o}=(0,a.useMemo)(()=>{let s=[],t=[];return e.forEach(e=>{"global"===e.type?s.push(e):t.push(e)}),{globalForms:s,customForms:t}},[e]),c=e.find(e=>e.id===s)?.title;return(0,r.jsxs)(P.l6,{value:s||"",onValueChange:e=>{"create-new-form"===e?l.push("/user/feedback-forms"):t(e)},children:[(0,r.jsx)(P.bq,{className:(0,E.cn)("w-[280px]",i),children:(0,r.jsx)(P.yv,{placeholder:"Select a feedback form...",children:c||"Select a feedback form..."})}),(0,r.jsxs)(P.gC,{children:[n.length>0&&(0,r.jsxs)(P.s3,{children:[(0,r.jsx)(P.TR,{children:"Form Templates"}),n.map(e=>(0,r.jsx)(P.eb,{value:e.id,children:e.title},e.id))]}),n.length>0&&o.length>0&&(0,r.jsx)(P.mi,{}),o.length>0&&(0,r.jsxs)(P.s3,{children:[(0,r.jsx)(P.TR,{children:"My Custom Forms"}),o.map(e=>(0,r.jsx)(P.eb,{value:e.id,children:e.title},e.id))]}),(n.length>0||o.length>0)&&(0,r.jsx)(P.mi,{}),(0,r.jsx)(P.s3,{children:(0,r.jsx)(P.eb,{value:"create-new-form",className:"text-primary focus:text-primary",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(Z.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Create Custom Form"})]})})}),0===e.length&&(0,r.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No forms available."})]})]})}var D=t(71669),F=t(89667),B=t(76242);let L=x.Ik({streetNumber:x.Yj().min(1,"Street number is required."),streetName:x.Yj().min(1,"Street name is required."),unitNumber:x.Yj().optional(),city:x.Yj().min(1,"City is required."),state:x.Yj().min(2,"State is required.").max(2,"Use 2-letter abbreviation."),zipCode:x.Yj().min(5,"Zip code must be 5 digits.").max(5,"Zip code must be 5 digits.")});function O(){let{user:e,loading:s}=(0,o.A)(),t=(0,d.useRouter)(),u=(0,d.useParams)(),{toast:x}=(0,b.dj)(),[v,P]=(0,a.useState)(null),[E,Z]=(0,a.useState)([]),[O,T]=(0,a.useState)(!0),[_,Y]=(0,a.useState)(null),[G,V]=(0,a.useState)(!1),[J,W]=(0,a.useState)([]),[K,X]=(0,a.useState)([]),[Q,ee]=(0,a.useState)(!0),[es,et]=(0,a.useState)(!1),er=(0,a.useRef)(null),[ea,ei]=(0,a.useState)(!1),[el,en]=(0,a.useState)(!1),eo=u.id,ed=(0,m.mN)({resolver:(0,p.u)(L),defaultValues:{streetNumber:"",streetName:"",unitNumber:"",city:"",state:"",zipCode:""}}),ec=(0,a.useCallback)(async()=>{if(e&&eo){T(!0),ee(!0),Y(null);try{let s=(0,i.H9)(n.db,"openHouses",eo),t=await (0,i.x7)(s);if(t.exists()){let s={id:t.id,...t.data()};if(s.userId!==e.uid)Y("You don't have permission to view this page."),P(null);else{P(s);let t=(0,i.query)((0,i.collection)(n.db,"feedbackForms"),(0,i.where)("type","==","global")),r=(0,i.query)((0,i.collection)(n.db,"feedbackForms"),(0,i.where)("type","==","custom"),(0,i.where)("userId","==",e.uid)),[a,l]=await Promise.all([(0,i.getDocs)(t),(0,i.getDocs)(r)]),o=[...a.docs.map(e=>({id:e.id,...e.data()})),...l.docs.map(e=>({id:e.id,...e.data()}))];Z(o);let d=(0,i.query)((0,i.collection)(n.db,"leads"),(0,i.where)("openHouseId","==",eo),(0,i.where)("userId","==",e.uid)),c=(0,i.query)((0,i.collection)(n.db,"feedbackSubmissions"),(0,i.where)("openHouseId","==",eo),(0,i.where)("userId","==",e.uid)),[u,h]=await Promise.all([(0,i.getDocs)(d),(0,i.getDocs)(c)]);W(u.docs.map(e=>e.data())),X(h.docs.map(e=>e.data()))}}else Y("Open house not found."),P(null)}catch(e){console.error("Error fetching document:",e),"permission-denied"===e.code?Y("You do not have permission to view these records."):Y("Failed to fetch open house details."),P(null)}finally{T(!1),ee(!1)}}},[eo,e]),eu=async(e,s)=>{let t=(0,i.H9)(n.db,"openHouses",e);try{await (0,i.mZ)(t,{feedbackFormId:s}),await ec()}catch(e){console.error("Error setting feedback form:",e)}},eh=async s=>{if(!e)return;let t=(0,i.wP)(n.db),r=(0,i.query)((0,i.collection)(n.db,"openHouses"),(0,i.where)("userId","==",e.uid),(0,i.where)("isActive","==",!0));(await (0,i.getDocs)(r)).forEach(e=>{e.id!==s&&t.update(e.ref,{isActive:!1})});let a=(0,i.H9)(n.db,"openHouses",s);t.update(a,{isActive:!0});try{await t.commit(),await ec()}catch(e){console.error("Error setting active open house:",e)}},em=async()=>{if(e&&v){V(!0);try{if(v.imageUrl){let e=(0,l.KR)(n.IG,v.imageUrl);await (0,l.XR)(e).catch(e=>{if("storage/object-not-found"!==e.code)throw e})}await (0,i.kd)((0,i.H9)(n.db,"openHouses",v.id)),t.push("/user/dashboard")}catch(e){console.error("Error deleting open house:",e),V(!1)}}};async function ex(s){if(!e||!v)return;let{streetNumber:t,streetName:r,unitNumber:a,city:l,state:o,zipCode:d}=s,c=`${t} ${r}${a?` #${a}`:""}, ${l}, ${o.toUpperCase()} ${d}`;try{let e=(0,i.H9)(n.db,"openHouses",v.id);await (0,i.mZ)(e,{address:c,structuredAddress:s}),et(!1),await ec()}catch(e){console.error("Error updating address:",e)}}let ep=async s=>{if(!s.target.files||0===s.target.files.length||!e||!v)return;let t=s.target.files[0];if(t.size>5242880)return;ei(!0);let r=(0,l.KR)(n.IG,`open-house-images/${e.uid}/${v.id}/${(0,f.A)()}`);try{let e=await (0,l.D)(r,t),s=await (0,l.qk)(e.ref),a=(0,i.H9)(n.db,"openHouses",v.id);await (0,i.mZ)(a,{imageUrl:s}),P(e=>e?{...e,imageUrl:s}:null)}catch(e){console.error("Error uploading image:",e)}finally{ei(!1)}},ef=async()=>{if(v&&v.imageUrl)try{let e=(0,l.KR)(n.IG,v.imageUrl);await (0,l.XR)(e);let s=(0,i.H9)(n.db,"openHouses",v.id);await (0,i.mZ)(s,{imageUrl:null}),P(e=>e?{...e,imageUrl:void 0}:null)}catch(e){console.error("Error removing image:",e)}finally{en(!1)}};if(O||s)return(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading details..."});if(_)return(0,r.jsx)("p",{className:"text-destructive",children:_});if(!v)return(0,r.jsx)("p",{className:"text-muted-foreground",children:"Open house not found or you do not have permission to view it."});let eg=v.address.split(","),ej=eg[0],eb=eg.length>1?eg.slice(1).join(",").trim():"",ev=()=>(0,r.jsxs)(g.Zp,{className:"flex flex-col h-full hover:bg-muted/50 transition-colors",children:[(0,r.jsx)(g.aR,{className:"flex-grow pb-2",children:(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-0",children:[(0,r.jsx)(g.ZB,{className:"text-sm font-medium",children:"Status"}),(0,r.jsx)(y,{className:"h-4 w-4 text-muted-foreground"})]})}),(0,r.jsx)(g.Wu,{children:v.isActive?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"Active"}),(0,r.jsxs)(U.E,{className:"bg-green-600 text-white hover:bg-green-600",children:[(0,r.jsx)(N.A,{className:"mr-1"})," Live"]})]}):(0,r.jsx)("div",{className:"text-2xl font-bold",children:"Inactive"})})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(B.Bc,{children:(0,r.jsxs)("div",{className:"w-full mx-auto space-y-8",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(j.$,{variant:"ghost",onClick:()=>t.back(),className:"mb-4 -ml-4",children:[(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Back to Dashboard"})]})}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-4 md:gap-6",children:[(0,r.jsxs)("div",{className:"w-full md:w-48 h-48 md:h-32 relative rounded-md overflow-hidden border flex-shrink-0 bg-muted group",children:[v.imageUrl?(0,r.jsx)(c.default,{src:v.imageUrl,alt:`Image of ${v.address}`,fill:!0,className:"object-cover","data-ai-hint":"house exterior"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(k.A,{className:"w-12 h-12 text-muted-foreground"})}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center gap-2 rounded-md opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:()=>er.current?.click(),disabled:ea,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Upload image",children:ea?(0,r.jsx)(A.A,{className:"h-6 w-6 animate-spin"}):(0,r.jsx)(C,{className:"h-6 w-6"})}),v.imageUrl&&(0,r.jsx)("button",{onClick:()=>en(!0),className:"p-2 rounded-full bg-destructive/80 text-white hover:bg-destructive transition-colors","aria-label":"Remove image",children:(0,r.jsx)(R.A,{className:"h-6 w-6"})})]}),(0,r.jsx)("input",{type:"file",ref:er,onChange:ep,className:"hidden",accept:"image/png, image/jpeg, image/gif"})]}),(0,r.jsxs)("div",{className:"flex-grow pt-1 w-full",children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight font-headline",children:ej}),(0,r.jsx)(j.$,{variant:"ghost",size:"icon",onClick:()=>et(!0),className:"flex-shrink-0",children:(0,r.jsx)(q.A,{className:"h-5 w-5 text-muted-foreground"})})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:eb})]})}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Created on ",v.createdAt?new Date(v.createdAt.toDate()).toLocaleDateString():"N/A"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-3",children:[(0,r.jsx)(g.Zp,{asChild:!0,className:"hover:bg-muted/50 transition-colors h-full",children:(0,r.jsxs)(h(),{href:`/user/my-leads?house=${v.id}`,children:[(0,r.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(g.ZB,{className:"text-sm font-medium",children:"Total Leads"}),(0,r.jsx)(S.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:Q?"...":J.length})})]})}),(0,r.jsx)(g.Zp,{asChild:!0,className:"hover:bg-muted/50 transition-colors h-full",children:(0,r.jsxs)(h(),{href:`/user/open-house/${v.id}/feedback`,children:[(0,r.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(g.ZB,{className:"text-sm font-medium",children:"Feedback Responses"}),(0,r.jsx)(M.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:Q?"...":K.length})})]})}),(0,r.jsx)("div",{className:"col-span-2 lg:col-span-1",children:v.isActive?(0,r.jsx)(ev,{}):(0,r.jsxs)(H.Lt,{children:[(0,r.jsx)(H.tv,{asChild:!0,children:(0,r.jsx)("button",{className:"w-full h-full text-left",children:(0,r.jsx)(ev,{})})}),(0,r.jsxs)(H.EO,{children:[(0,r.jsxs)(H.wd,{children:[(0,r.jsx)(H.r7,{children:"Make Open House Active?"}),(0,r.jsx)(H.$v,{children:"This will make your QR code direct visitors to this property's feedback form. Any other active open house will be deactivated."})]}),(0,r.jsxs)(H.ck,{children:[(0,r.jsx)(H.Zr,{children:"Cancel"}),(0,r.jsx)(H.Rx,{onClick:()=>eh(v.id),children:"Yes, make active"})]})]})]})})]}),(0,r.jsx)("div",{className:"grid gap-6 md:grid-cols-1",children:(0,r.jsxs)(g.Zp,{children:[(0,r.jsxs)(g.aR,{children:[(0,r.jsx)(g.ZB,{children:"Feedback Form"}),(0,r.jsx)(g.BT,{children:"Select which form visitors will see when they scan your QR code for this property."})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"max-w-md",children:(0,r.jsx)($,{forms:E,selectedFormId:v.feedbackFormId,onFormSelect:e=>eu(v.id,e),triggerClassName:"w-full"})})})]})}),(0,r.jsx)(I.w,{}),(0,r.jsxs)(g.Zp,{className:"border-destructive",children:[(0,r.jsxs)(g.aR,{children:[(0,r.jsx)(g.ZB,{className:"text-destructive",children:"Danger Zone"}),(0,r.jsx)(g.BT,{children:"This is a permanent action and cannot be undone."})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsxs)(H.Lt,{children:[(0,r.jsx)(H.tv,{asChild:!0,children:(0,r.jsxs)(j.$,{variant:"destructive",children:[(0,r.jsx)(R.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Delete Open House"})]})}),(0,r.jsxs)(H.EO,{children:[(0,r.jsxs)(H.wd,{children:[(0,r.jsx)(H.r7,{children:"Are you absolutely sure?"}),(0,r.jsx)(H.$v,{children:"This action cannot be undone. This will permanently delete your open house listing and all associated lead logs."})]}),(0,r.jsxs)(H.ck,{children:[(0,r.jsx)(H.Zr,{disabled:G,children:"Cancel"}),(0,r.jsx)(H.Rx,{onClick:em,disabled:G,className:"bg-destructive hover:bg-destructive/90",children:G?"Deleting...":"Yes, delete it"})]})]})]})})]})]})}),(0,r.jsx)(z.lG,{open:es,onOpenChange:et,children:(0,r.jsxs)(z.Cf,{children:[(0,r.jsxs)(z.c7,{children:[(0,r.jsx)(z.L3,{children:"Edit Address"}),(0,r.jsx)(z.rr,{children:"Update the address details for this open house."})]}),(0,r.jsx)(D.lV,{...ed,children:(0,r.jsxs)("form",{onSubmit:ed.handleSubmit(ex),className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsx)(D.zB,{control:ed.control,name:"streetNumber",render:({field:e})=>(0,r.jsxs)(D.eI,{children:[(0,r.jsx)(D.lR,{children:"Number"}),(0,r.jsx)(D.MJ,{children:(0,r.jsx)(F.p,{...e})}),(0,r.jsx)(D.C5,{})]})})}),(0,r.jsx)("div",{className:"col-span-3",children:(0,r.jsx)(D.zB,{control:ed.control,name:"streetName",render:({field:e})=>(0,r.jsxs)(D.eI,{children:[(0,r.jsx)(D.lR,{children:"Street Name"}),(0,r.jsx)(D.MJ,{children:(0,r.jsx)(F.p,{...e})}),(0,r.jsx)(D.C5,{})]})})})]}),(0,r.jsx)(D.zB,{control:ed.control,name:"unitNumber",render:({field:e})=>(0,r.jsxs)(D.eI,{children:[(0,r.jsx)(D.lR,{children:"Unit Number (Optional)"}),(0,r.jsx)(D.MJ,{children:(0,r.jsx)(F.p,{...e})}),(0,r.jsx)(D.C5,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(D.zB,{control:ed.control,name:"city",render:({field:e})=>(0,r.jsxs)(D.eI,{children:[(0,r.jsx)(D.lR,{children:"City"}),(0,r.jsx)(D.MJ,{children:(0,r.jsx)(F.p,{...e})}),(0,r.jsx)(D.C5,{})]})})}),(0,r.jsx)(D.zB,{control:ed.control,name:"state",render:({field:e})=>(0,r.jsxs)(D.eI,{children:[(0,r.jsx)(D.lR,{children:"State"}),(0,r.jsx)(D.MJ,{children:(0,r.jsx)(F.p,{...e})}),(0,r.jsx)(D.C5,{})]})})]}),(0,r.jsx)(D.zB,{control:ed.control,name:"zipCode",render:({field:e})=>(0,r.jsxs)(D.eI,{children:[(0,r.jsx)(D.lR,{children:"Zip Code"}),(0,r.jsx)(D.MJ,{children:(0,r.jsx)(F.p,{...e})}),(0,r.jsx)(D.C5,{})]})}),(0,r.jsxs)(z.Es,{className:"pt-4",children:[(0,r.jsx)(j.$,{type:"button",variant:"ghost",onClick:()=>et(!1),children:"Cancel"}),(0,r.jsx)(j.$,{type:"submit",disabled:ed.formState.isSubmitting,children:ed.formState.isSubmitting?"Saving...":"Save Address"})]})]})})]})}),(0,r.jsx)(H.Lt,{open:el,onOpenChange:en,children:(0,r.jsxs)(H.EO,{children:[(0,r.jsxs)(H.wd,{children:[(0,r.jsx)(H.r7,{children:"Are you sure?"}),(0,r.jsx)(H.$v,{children:"This will permanently remove the image for this open house. This action cannot be undone."})]}),(0,r.jsxs)(H.ck,{children:[(0,r.jsx)(H.Zr,{children:"Cancel"}),(0,r.jsx)(H.Rx,{onClick:ef,className:"bg-destructive hover:bg-destructive/90",children:"Yes, remove image"})]})]})})]})}},95544:(e,s,t)=>{Promise.resolve().then(t.bind(t,48827))},96834:(e,s,t)=>{"use strict";t.d(s,{E:()=>n});var r=t(60687);t(43210);var a=t(24224),i=t(4780);let l=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:s,...t}){return(0,r.jsx)("div",{className:(0,i.cn)(l({variant:s}),e),...t})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,724,16,306,814,520,377,840,300,999,244,470],()=>t(83724));module.exports=r})();