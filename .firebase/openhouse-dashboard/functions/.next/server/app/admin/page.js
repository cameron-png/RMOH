(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/page.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7085:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{M:()=>d});var a=t(91199);t(42087);var i=t(31371),n=t(33331),l=e([i]);function o(e){if(null==e)return e;if("function"==typeof e.toDate)return e.toDate().toISOString();if(Array.isArray(e))return e.map(o);if("object"==typeof e){let s={};for(let t in e)s[t]=o(e[t]);return s}return e}async function d(){try{let e=[];try{e=(await i.G7.collection("users").get()).docs.map(e=>({id:e.id,...e.data()}))}catch(e){if("NOT_FOUND"===e.code||e.details&&e.details.includes("NOT_FOUND"))console.log("Admin Dashboard: 'users' collection not found, returning empty array.");else throw e}let s=[];try{s=(await i.G7.collection("openHouses").get()).docs.map(e=>({id:e.id,...e.data()}))}catch(e){if("NOT_FOUND"===e.code||e.details&&e.details.includes("NOT_FOUND"))console.log("Admin Dashboard: 'openHouses' collection not found, returning empty array.");else throw e}let t=[];try{t=(await i.G7.collection("feedbackForms").where("type","==","global").get()).docs.map(e=>({id:e.id,...e.data()}))}catch(e){if("NOT_FOUND"===e.code||e.details&&e.details.includes("NOT_FOUND"))console.log("Admin Dashboard: 'feedbackForms' collection not found, returning empty array.");else throw e}let r={};try{let e=await i.G7.collection("settings").doc("appDefaults").get();e.exists&&(r=e.data())}catch(e){if("NOT_FOUND"===e.code||e.details&&e.details.includes("NOT_FOUND"))console.log("Admin Dashboard: 'settings' collection not found, returning empty object.");else throw e}return{users:o(e),openHouses:o(s),forms:o(t),settings:o(r)}}catch(e){throw console.error("Error in getAdminDashboardData:",e),Error("Failed to fetch admin dashboard data: "+e.message)}}i=(l.then?(await l)():l)[0],(0,n.D)([d]),(0,a.A)(d,"00fcf9e9e6af0f45e38921aaa0add6f733eb9b9555",null),r()}catch(e){r(e)}})},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},9801:e=>{"use strict";e.exports=import("firebase-admin/app")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},20915:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.r(s),t.d(s,{"00fcf9e9e6af0f45e38921aaa0add6f733eb9b9555":()=>a.M});var a=t(7085),i=e([a]);a=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},21820:e=>{"use strict";e.exports=require("os")},22820:(e,s,t)=>{Promise.resolve().then(t.bind(t,61193))},24026:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},24803:e=>{"use strict";e.exports=import("firebase-admin/storage")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},31371:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{let o;t.d(s,{G7:()=>d});var a=t(9801),i=t(7879),n=t(24803),l=e([a,i,n]);[a,i,n]=l.then?(await l)():l,o=0===(0,a.getApps)().length?(0,a.initializeApp)():(0,a.getApp)();let d=(0,i.getFirestore)(o);(0,n.getStorage)(o),r()}catch(e){r(e)}})},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35137:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},35265:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},37366:e=>{"use strict";e.exports=require("dns")},50499:(e,s,t)=>{Promise.resolve().then(t.bind(t,1132))},55511:e=>{"use strict";e.exports=require("crypto")},57207:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},61193:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var r=t(60687);t(43210);var a=t(16189),i=t(68504),n=t(33870),l=t(76113),o=t(96556),d=t(29523),c=t(30474),u=t(85814),h=t.n(u);function m({children:e}){let{user:s,loading:t}=(0,i.A)();return((0,a.useRouter)(),t||!s?.isAdmin)?(0,r.jsx)("div",{className:"flex min-h-screen w-full flex-col items-center justify-center bg-background",children:(0,r.jsx)("p",{className:"text-muted-foreground",children:"Verifying admin credentials..."})}):(0,r.jsx)(n.GB,{children:(0,r.jsxs)("div",{className:"flex min-h-screen w-full",children:[(0,r.jsx)(l.z,{}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsxs)("header",{className:"sticky top-0 z-30 flex h-14 items-center gap-4 border-b bg-sidebar px-4 sm:h-auto sm:border-0 sm:bg-transparent sm:px-6 md:hidden",children:[(0,r.jsx)(n.x2,{asChild:!0,children:(0,r.jsxs)(d.$,{variant:"ghost",size:"icon",className:"text-sidebar-foreground hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("span",{className:"sr-only",children:"Toggle Menu"})]})}),(0,r.jsx)(h(),{href:"/user/dashboard",className:"flex items-center gap-2 text-lg font-semibold md:text-base font-headline text-sidebar-foreground",children:(0,r.jsx)(c.default,{src:"https://firebasestorage.googleapis.com/v0/b/openhouse-dashboard.firebasestorage.app/o/RMOHbug%20white.png?alt=media",alt:"RateMyOpenHouse.com Logo",width:150,height:40,className:"w-auto h-8","data-ai-hint":"app logo white"})})]}),(0,r.jsx)("main",{className:"flex-1 p-4 sm:p-6",children:e}),(0,r.jsx)("footer",{className:"py-4 px-6 mt-auto",children:(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(c.default,{src:"https://firebasestorage.googleapis.com/v0/b/openhouse-dashboard.firebasestorage.app/o/RMOHbug.png?alt=media",alt:"RateMyOpenHouse.com Icon",width:40,height:40,className:"h-8 w-auto opacity-50","data-ai-hint":"app icon"})})})]})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64571:(e,s,t)=>{Promise.resolve().then(t.bind(t,73902))},65456:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]])},68514:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=t(65239),a=t(48088),i=t(88170),n=t.n(i),l=t(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);t.d(s,o);let d={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1132)),"/home/user/studio/src/app/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,99111)),"/home/user/studio/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,61137)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/admin/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},69795:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]])},73496:e=>{"use strict";e.exports=require("http2")},73902:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ex});var r=t(60687),a=t(43210),i=t(75535),n=t(50944),l=t(44493),o=t(6211),d=t(70569),c=t(11273),u=t(72942),h=t(46059),m=t(3416),x=t(43),p=t(65551),f=t(96963),j="Tabs",[g,b]=(0,c.A)(j,[u.RG]),v=(0,u.RG)(),[y,w]=g(j),N=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,onValueChange:i,defaultValue:n,orientation:l="horizontal",dir:o,activationMode:d="automatic",...c}=e,u=(0,x.jH)(o),[h,j]=(0,p.i)({prop:a,onChange:i,defaultProp:n});return(0,r.jsx)(y,{scope:t,baseId:(0,f.B)(),value:h,onValueChange:j,orientation:l,dir:u,activationMode:d,children:(0,r.jsx)(m.sG.div,{dir:u,"data-orientation":l,...c,ref:s})})});N.displayName=j;var A="TabsList",C=a.forwardRef((e,s)=>{let{__scopeTabs:t,loop:a=!0,...i}=e,n=w(A,t),l=v(t);return(0,r.jsx)(u.bL,{asChild:!0,...l,orientation:n.orientation,dir:n.dir,loop:a,children:(0,r.jsx)(m.sG.div,{role:"tablist","aria-orientation":n.orientation,...i,ref:s})})});C.displayName=A;var k="TabsTrigger",q=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:a,disabled:i=!1,...n}=e,l=w(k,t),o=v(t),c=S(l.baseId,a),h=M(l.baseId,a),x=a===l.value;return(0,r.jsx)(u.q7,{asChild:!0,...o,focusable:!i,active:x,children:(0,r.jsx)(m.sG.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:c,...n,ref:s,onMouseDown:(0,d.m)(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():l.onValueChange(a)}),onKeyDown:(0,d.m)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&l.onValueChange(a)}),onFocus:(0,d.m)(e.onFocus,()=>{let e="manual"!==l.activationMode;x||i||!e||l.onValueChange(a)})})})});q.displayName=k;var F="TabsContent",D=a.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,forceMount:n,children:l,...o}=e,d=w(F,t),c=S(d.baseId,i),u=M(d.baseId,i),x=i===d.value,p=a.useRef(x);return a.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,r.jsx)(h.C,{present:n||x,children:({present:t})=>(0,r.jsx)(m.sG.div,{"data-state":x?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":c,hidden:!t,id:u,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:t&&l})})});function S(e,s){return`${e}-trigger-${s}`}function M(e,s){return`${e}-content-${s}`}D.displayName=F;var I=t(4780);let O=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(C,{ref:t,className:(0,I.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));O.displayName=C.displayName;let U=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(q,{ref:t,className:(0,I.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));U.displayName=q.displayName;let R=a.forwardRef(({className:e,...s},t)=>(0,r.jsx)(D,{ref:t,className:(0,I.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));R.displayName=D.displayName;var E=t(32584),$=t(29867),H=t(89667),T=t(30474),G=t(85814),P=t.n(G),_=t(96834),z=t(24026),L=t(24482),B=t(35265),V=t(69795),Y=t(35137),Z=t(57207),Q=t(90357),K=t(65456),J=t(29523),W=t(63503),X=t(27605),ee=t(63442),es=t(45880),et=t(71669),er=t(34729),ea=t(15079),ei=t(74112),en=t(35950),el=t(21342),eo=t(93500),ed=t(6475);let ec=(0,ed.createServerReference)("00fcf9e9e6af0f45e38921aaa0add6f733eb9b9555",ed.callServer,void 0,ed.findSourceMapURL,"getAdminDashboardData"),eu=es.Ik({id:es.Yj(),value:es.Yj().min(1,"Option text cannot be empty")}),eh=es.Ik({id:es.Yj(),text:es.Yj().min(3,"Question text must be at least 3 characters"),type:es.k5(["short-answer","yes-no","rating","multiple-choice"]),options:es.YO(eu).optional()}),em=es.Ik({title:es.Yj().min(3,"Title must be at least 3 characters"),questions:es.YO(eh).min(1,"You must add at least one question")});function ex(){let[e,s]=(0,a.useState)([]),[t,d]=(0,a.useState)([]),[c,u]=(0,a.useState)([]),[h,m]=(0,a.useState)({}),[x,p]=(0,a.useState)(!0),{toast:f}=(0,$.dj)(),[j,g]=(0,a.useState)(""),[b,v]=(0,a.useState)(""),[y,w]=(0,a.useState)(!1),[A,C]=(0,a.useState)(null),[k,q]=(0,a.useState)(!1),[F,D]=(0,a.useState)(null),S=e=>{if(!e)return"??";let s=e.split(" ");return s.length>1?(s[0][0]+s[s.length-1][0]).toUpperCase():e.substring(0,2).toUpperCase()},M=(0,a.useCallback)(async()=>{p(!0);try{let{users:e,openHouses:t,forms:r,settings:a}=await ec();s(e),d(t),u(r),m(a)}catch(e){console.error("Error fetching admin data:",e),f({variant:"destructive",title:"Error",description:"Could not fetch admin data. You might not have the required permissions."})}p(!1)},[f]),I=(0,X.mN)({resolver:(0,ee.u)(em),defaultValues:{title:"",questions:[]}}),{fields:G,append:es,remove:ed,update:eu,move:eh}=(0,X.jz)({control:I.control,name:"questions"}),ex=I.watch("questions"),ep=e=>{let s=I.getValues(`questions.${e}`),t=[...s.options||[],{id:(0,ei.A)(),value:""}];eu(e,{...s,options:t})},ef=(e,s)=>{let t=I.getValues(`questions.${e}`),r=t.options?.filter((e,t)=>t!==s);eu(e,{...t,options:r})};async function ej(e){try{if(A){let s=(0,i.H9)(n.db,"feedbackForms",A.id);await (0,i.mZ)(s,{title:e.title,questions:e.questions})}else await (0,i.gS)((0,i.collection)(n.db,"feedbackForms"),{...e,type:"global",createdAt:i.Dc.now()});ev(),await M()}catch(e){console.error("Error saving form:",e),f({variant:"destructive",title:"Error",description:"Could not save the form."})}}let eg=async()=>{if(F)try{await (0,i.kd)((0,i.H9)(n.db,"feedbackForms",F)),await M()}catch(e){console.error("Error deleting form:",e),f({variant:"destructive",title:"Delete Failed",description:"Could not delete the form."})}finally{q(!1),D(null)}},eb=e=>{C(e||null),w(!0)},ev=()=>{w(!1),C(null),I.reset()},ey=e=>{D(e),q(!0)},ew=async e=>{try{let s=(0,i.H9)(n.db,"settings","appDefaults");await (0,i.BN)(s,{defaultGlobalFormId:e},{merge:!0}),m(s=>({...s,defaultGlobalFormId:e})),f({title:"Default Form Set",description:"New users will now receive this form by default."})}catch(e){console.error("Error setting default form:",e),f({variant:"destructive",title:"Error",description:"Could not set the default form."})}},eN=(0,a.useMemo)(()=>e.filter(e=>e.name?.toLowerCase().includes(j.toLowerCase())||e.email?.toLowerCase().includes(j.toLowerCase())),[e,j]),eA=(0,a.useMemo)(()=>{let s=new Map(e.map(e=>[e.id,e]));return t.map(e=>({...e,userName:s.get(e.userId)?.name||"Unknown User"})).filter(e=>e.address.toLowerCase().includes(b.toLowerCase())||e.userName.toLowerCase().includes(b.toLowerCase()))},[t,b,e]),eC=e=>"number"!=typeof e?"$0.00":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e/100);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-full mx-auto space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight font-headline",children:"Admin Dashboard"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Oversee users, forms, and platform settings."})]}),(0,r.jsxs)(N,{defaultValue:"users",className:"w-full",children:[(0,r.jsxs)(O,{className:"grid w-full grid-cols-1 md:grid-cols-3 h-auto md:h-10",children:[(0,r.jsx)(U,{value:"users",children:"All Users"}),(0,r.jsx)(U,{value:"openHouses",children:"Open Houses"}),(0,r.jsx)(U,{value:"formLibrary",children:"Form Library"})]}),(0,r.jsx)(R,{value:"users",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(l.ZB,{children:"All Users"}),(0,r.jsx)(l.BT,{children:"A list of all registered users on the platform."})]}),(0,r.jsx)(H.p,{placeholder:"Search by name or email...",value:j,onChange:e=>g(e.target.value),className:"w-full md:w-64"})]})}),(0,r.jsx)(l.Wu,{children:x?(0,r.jsx)("p",{children:"Loading users..."}):(0,r.jsx)("div",{className:"border rounded-lg overflow-x-auto",children:(0,r.jsxs)(o.XI,{children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"User"}),(0,r.jsx)(o.nd,{children:"Email"}),(0,r.jsx)(o.nd,{children:"Role"}),(0,r.jsx)(o.nd,{children:"Balance"})]})}),(0,r.jsx)(o.BF,{children:eN.length>0?eN.map(e=>(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nA,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(E.eu,{children:[(0,r.jsx)(E.BK,{src:e.photoURL||"",alt:e.name||"avatar","data-ai-hint":"person avatar"}),(0,r.jsx)(E.q5,{children:S(e.name)})]}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"font-medium",children:e.name})})]})}),(0,r.jsx)(o.nA,{children:e.email}),(0,r.jsx)(o.nA,{children:e.isAdmin?(0,r.jsx)(_.E,{children:"Admin"}):(0,r.jsx)(_.E,{variant:"secondary",children:"User"})}),(0,r.jsx)(o.nA,{children:eC(e.availableBalance)})]},e.id)):(0,r.jsx)(o.Hj,{children:(0,r.jsx)(o.nA,{colSpan:4,className:"h-24 text-center",children:"No users found."})})})]})})})]})}),(0,r.jsx)(R,{value:"openHouses",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsx)(l.aR,{children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(l.ZB,{children:"All Open Houses"}),(0,r.jsx)(l.BT,{children:"A list of all open houses created by users."})]}),(0,r.jsx)(H.p,{placeholder:"Search by address or user...",value:b,onChange:e=>v(e.target.value),className:"w-full md:w-64"})]})}),(0,r.jsx)(l.Wu,{children:x?(0,r.jsx)("p",{children:"Loading open houses..."}):(0,r.jsx)("div",{className:"border rounded-lg overflow-x-auto",children:(0,r.jsxs)(o.XI,{children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"Property"}),(0,r.jsx)(o.nd,{children:"Address"}),(0,r.jsx)(o.nd,{className:"hidden sm:table-cell",children:"Created By"}),(0,r.jsx)(o.nd,{children:"Status"}),(0,r.jsx)(o.nd,{children:"Gift Automation"})]})}),(0,r.jsx)(o.BF,{children:eA.length>0?eA.map(e=>(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nA,{children:(0,r.jsx)(P(),{href:`/user/open-house/${e.id}`,children:(0,r.jsx)("div",{className:"w-24 h-16 relative rounded-md overflow-hidden border flex-shrink-0 bg-muted",children:e.imageUrl?(0,r.jsx)(T.default,{src:e.imageUrl,alt:`Image of ${e.address}`,fill:!0,className:"object-cover","data-ai-hint":"house exterior"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(z.A,{className:"w-8 h-8 text-muted-foreground"})})})})}),(0,r.jsxs)(o.nA,{children:[(0,r.jsx)(P(),{href:`/user/open-house/${e.id}`,className:"hover:underline font-medium block max-w-xs truncate",children:e.address}),(0,r.jsx)("div",{className:"text-sm text-muted-foreground sm:hidden",children:e.userName})]}),(0,r.jsx)(o.nA,{className:"hidden sm:table-cell",children:e.userName}),(0,r.jsx)(o.nA,{children:e.isActive?(0,r.jsx)(_.E,{className:"bg-green-600 text-white hover:bg-green-600",children:"Active"}):(0,r.jsx)(_.E,{variant:"outline",children:"Inactive"})}),(0,r.jsx)(o.nA,{children:e.giftAutomation?.enabled?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(L.A,{className:"h-4 w-4 text-green-600"}),(0,r.jsxs)("span",{className:"font-medium text-sm",children:["$",((e.giftAutomation.amountInCents||0)/100).toFixed(2)," ",(0,r.jsx)("span",{className:"capitalize",children:e.giftAutomation.brandCode})]})]}):(0,r.jsx)(_.E,{variant:"secondary",children:"Disabled"})})]},e.id)):(0,r.jsx)(o.Hj,{children:(0,r.jsx)(o.nA,{colSpan:5,className:"h-24 text-center",children:"No open houses found."})})})]})})})]})}),(0,r.jsx)(R,{value:"formLibrary",children:(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)(l.aR,{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)(l.ZB,{children:"Form Library"}),(0,r.jsx)(l.BT,{children:"Manage feedback forms in the library that all users can access."})]}),(0,r.jsxs)(J.$,{onClick:()=>eb(),className:"w-full sm:w-auto",children:[(0,r.jsx)(B.A,{className:"mr-2"})," Create New Form"]})]}),(0,r.jsx)(l.Wu,{children:x?(0,r.jsx)("p",{children:"Loading forms..."}):c.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6 bg-muted/50 p-4 rounded-lg",children:[(0,r.jsx)("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",htmlFor:"default-form-select",children:"Default Form for New Users"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground mb-2",children:"This form will be the default for all new users upon sign-up."}),(0,r.jsxs)(ea.l6,{onValueChange:ew,value:h.defaultGlobalFormId,children:[(0,r.jsx)(ea.bq,{id:"default-form-select",className:"w-full max-w-sm",children:(0,r.jsx)(ea.yv,{placeholder:"Select a default form..."})}),(0,r.jsx)(ea.gC,{children:c.map(e=>(0,r.jsx)(ea.eb,{value:e.id,children:e.title},e.id))})]})]}),(0,r.jsx)("div",{className:"border rounded-lg overflow-x-auto",children:(0,r.jsxs)(o.XI,{children:[(0,r.jsx)(o.A0,{children:(0,r.jsxs)(o.Hj,{children:[(0,r.jsx)(o.nd,{children:"Title"}),(0,r.jsx)(o.nd,{children:"Questions"}),(0,r.jsx)(o.nd,{className:"w-[100px] text-right",children:"Actions"})]})}),(0,r.jsx)(o.BF,{children:c.map(e=>(0,r.jsxs)(o.Hj,{children:[(0,r.jsxs)(o.nA,{className:"font-medium flex items-center gap-2",children:[e.title,e.id===h.defaultGlobalFormId&&(0,r.jsx)(_.E,{variant:"secondary",children:"Default"})]}),(0,r.jsx)(o.nA,{children:e.questions.length}),(0,r.jsx)(o.nA,{className:"text-right",children:(0,r.jsxs)(el.rI,{children:[(0,r.jsx)(el.ty,{asChild:!0,children:(0,r.jsxs)(J.$,{variant:"ghost",size:"icon",children:[(0,r.jsx)(V.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Form Actions"})]})}),(0,r.jsxs)(el.SQ,{align:"end",children:[(0,r.jsxs)(el._2,{onClick:()=>eb(e),children:[(0,r.jsx)(Y.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsxs)(el._2,{onClick:()=>ey(e.id),className:"text-destructive focus:text-destructive",children:[(0,r.jsx)(Z.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Delete"})]})]})]})})]},e.id))})]})})]}):(0,r.jsxs)("div",{className:"text-center py-16 border-2 border-dashed rounded-lg",children:[(0,r.jsx)("h3",{className:"text-xl font-medium",children:"No Forms in Library"}),(0,r.jsx)("p",{className:"text-muted-foreground mt-2",children:'Click "Create New Form" to build a new form for the library.'})]})})]})})]})]}),(0,r.jsx)(W.lG,{open:y,onOpenChange:e=>!e&&ev(),children:(0,r.jsxs)(W.Cf,{className:"max-w-3xl",children:[(0,r.jsxs)(W.c7,{children:[(0,r.jsx)(W.L3,{children:A?"Edit Form":"Create New Library Form"}),(0,r.jsx)(W.rr,{children:A?"Modify the details of this form.":"Design a new feedback form for the library."})]}),(0,r.jsx)(et.lV,{...I,children:(0,r.jsxs)("form",{onSubmit:I.handleSubmit(ej),children:[(0,r.jsxs)("div",{className:"space-y-6 p-1 max-h-[60vh] overflow-y-auto",children:[(0,r.jsx)(et.zB,{control:I.control,name:"title",render:({field:e})=>(0,r.jsxs)(et.eI,{children:[(0,r.jsx)(et.lR,{children:"Form Title"}),(0,r.jsx)(et.MJ,{children:(0,r.jsx)(H.p,{placeholder:"e.g., General Property Feedback",...e})}),(0,r.jsx)(et.C5,{})]})}),(0,r.jsx)(en.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsx)("h3",{className:"text-lg font-medium",children:"Questions"})}),(0,r.jsx)("div",{className:"space-y-4",children:G.map((e,s)=>(0,r.jsx)(l.Zp,{className:"p-4 bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-900/50 relative transition-all",children:(0,r.jsxs)("div",{className:"flex justify-between items-start gap-4",children:[(0,r.jsxs)("div",{className:"flex-grow space-y-4",children:[(0,r.jsx)(et.zB,{control:I.control,name:`questions.${s}.text`,render:({field:e})=>(0,r.jsxs)(et.eI,{children:[(0,r.jsxs)(et.lR,{children:["Question ",s+1]}),(0,r.jsx)(et.MJ,{children:(0,r.jsx)(er.T,{placeholder:"What would you like to ask?",...e})}),(0,r.jsx)(et.C5,{})]})}),(0,r.jsx)(et.zB,{control:I.control,name:`questions.${s}.type`,render:({field:e})=>(0,r.jsxs)(et.eI,{children:[(0,r.jsx)(et.lR,{children:"Question Type"}),(0,r.jsxs)(ea.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(et.MJ,{children:(0,r.jsx)(ea.bq,{children:(0,r.jsx)(ea.yv,{placeholder:"Select a question type"})})}),(0,r.jsxs)(ea.gC,{children:[(0,r.jsx)(ea.eb,{value:"short-answer",children:"Short Answer"}),(0,r.jsx)(ea.eb,{value:"yes-no",children:"Yes/No"}),(0,r.jsx)(ea.eb,{value:"rating",children:"1-5 Rating"}),(0,r.jsx)(ea.eb,{value:"multiple-choice",children:"Multiple Choice"})]})]}),(0,r.jsx)(et.C5,{})]})}),ex[s]?.type==="multiple-choice"&&(0,r.jsxs)("div",{className:"space-y-3 pl-4 border-l-2 ml-2",children:[(0,r.jsx)(et.lR,{children:"Options"}),ex[s].options?.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(et.zB,{control:I.control,name:`questions.${s}.options.${t}.value`,render:({field:e})=>(0,r.jsxs)(et.eI,{className:"flex-grow",children:[(0,r.jsx)(et.MJ,{children:(0,r.jsx)(H.p,{placeholder:`Option ${t+1}`,...e})}),(0,r.jsx)(et.C5,{})]})}),(0,r.jsx)(J.$,{variant:"ghost",size:"icon",onClick:()=>ef(s,t),type:"button",children:(0,r.jsx)(Z.A,{className:"w-4 h-4 text-destructive"})})]},e.id)),(0,r.jsxs)(J.$,{size:"sm",variant:"outline",type:"button",onClick:()=>ep(s),children:[(0,r.jsx)(B.A,{className:"mr-2"})," Add Option"]})]})]}),(0,r.jsxs)("div",{className:"absolute top-2 right-2 flex flex-col gap-1",children:[(0,r.jsx)(J.$,{variant:"ghost",size:"icon",onClick:()=>eh(s,s-1),disabled:0===s,type:"button","aria-label":"Move up",children:(0,r.jsx)(Q.A,{className:"w-4 h-4"})}),(0,r.jsx)(J.$,{variant:"ghost",size:"icon",onClick:()=>eh(s,s+1),disabled:s===G.length-1,type:"button","aria-label":"Move down",children:(0,r.jsx)(K.A,{className:"w-4 h-4"})}),(0,r.jsx)(J.$,{variant:"ghost",size:"icon",onClick:()=>ed(s),type:"button","aria-label":"Delete question",className:"text-destructive hover:text-destructive",children:(0,r.jsx)(Z.A,{className:"w-4 h-4"})})]})]})},e.id))}),(0,r.jsx)(et.C5,{children:I.formState.errors.questions?.message}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)(J.$,{size:"sm",variant:"secondary",onClick:()=>{es({id:(0,ei.A)(),text:"",type:"short-answer",options:[]})},type:"button",children:[(0,r.jsx)(B.A,{className:"mr-2"})," Add Question"]})})]})]}),(0,r.jsxs)(W.Es,{className:"mt-6 pt-4 border-t",children:[(0,r.jsx)(J.$,{type:"button",variant:"ghost",onClick:ev,children:"Cancel"}),(0,r.jsx)(J.$,{type:"submit",disabled:I.formState.isSubmitting,children:I.formState.isSubmitting?"Saving...":"Save Form"})]})]})})]})}),(0,r.jsx)(eo.Lt,{open:k,onOpenChange:q,children:(0,r.jsxs)(eo.EO,{children:[(0,r.jsxs)(eo.wd,{children:[(0,r.jsx)(eo.r7,{children:"Are you sure?"}),(0,r.jsx)(eo.$v,{children:"This action cannot be undone. This will permanently delete this form from the library."})]}),(0,r.jsxs)(eo.ck,{children:[(0,r.jsx)(eo.Zr,{onClick:()=>D(null),children:"Cancel"}),(0,r.jsx)(eo.Rx,{onClick:eg,className:"bg-destructive hover:bg-destructive/90",children:"Yes, delete form"})]})]})})]})}},74075:e=>{"use strict";e.exports=require("zlib")},74112:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var r=t(55511),a=t.n(r);let i={randomUUID:a().randomUUID},n=new Uint8Array(256),l=n.length,o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));let d=function(e,s,t){if(i.randomUUID&&!s&&!e)return i.randomUUID();let r=(e=e||{}).random||(e.rng||function(){return l>n.length-16&&(a().randomFillSync(n),l=0),n.slice(l,l+=16)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,s){t=t||0;for(let e=0;e<16;++e)s[t+e]=r[e];return s}return function(e,s=0){return o[e[s+0]]+o[e[s+1]]+o[e[s+2]]+o[e[s+3]]+"-"+o[e[s+4]]+o[e[s+5]]+"-"+o[e[s+6]]+o[e[s+7]]+"-"+o[e[s+8]]+o[e[s+9]]+"-"+o[e[s+10]]+o[e[s+11]]+o[e[s+12]]+o[e[s+13]]+o[e[s+14]]+o[e[s+15]]}(r)}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},90357:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let r=(0,t(82614).A)("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]])},91645:e=>{"use strict";e.exports=require("net")},92964:(e,s,t)=>{Promise.resolve().then(t.bind(t,99111))},94735:e=>{"use strict";e.exports=require("events")},96834:(e,s,t)=>{"use strict";t.d(s,{E:()=>l});var r=t(60687);t(43210);var a=t(24224),i=t(4780);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...t}){return(0,r.jsx)("div",{className:(0,i.cn)(n({variant:s}),e),...t})}},99111:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/admin/layout.tsx","default")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[447,724,16,306,814,758,245,499,149,999,244,948],()=>t(68514));module.exports=r})();