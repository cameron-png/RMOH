(()=>{var e={};e.id=594,e.ids=[594],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6981:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>em});var r=s(60687),a=s(43210),i=s(75535),n=s(70146),o=s(50944),l=s(68504),d=s(16189),c=s(30474),u=s(85814),m=s.n(u),h=s(27605),x=s(45880),p=s(63442),f=s(74112),j=s(61294),g=s(44493),b=s(29523),v=s(29867),y=s(82614);let w=(0,y.A)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);var N=s(58893),k=s(55817),C=s(24026),A=s(11516);let S=(0,y.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var I=s(57207),E=s(35137),R=s(48206),q=s(18329),U=s(24482),P=s(2093),G=s(93500),$=s(63503),B=s(35950),M=s(96834),H=s(15079),z=s(4780),F=s(35265);function T({forms:e,selectedFormId:t,onFormSelect:s,triggerClassName:i}){let n=(0,d.useRouter)(),{globalForms:o,customForms:l}=(0,a.useMemo)(()=>{let t=[],s=[];return e.forEach(e=>{"global"===e.type?t.push(e):s.push(e)}),{globalForms:t,customForms:s}},[e]),c=e.find(e=>e.id===t)?.title;return(0,r.jsxs)(H.l6,{value:t||"",onValueChange:e=>{"create-new-form"===e?n.push("/user/feedback-forms"):s(e)},children:[(0,r.jsx)(H.bq,{className:(0,z.cn)("w-[280px]",i),children:(0,r.jsx)(H.yv,{placeholder:"Select a feedback form...",children:c||"Select a feedback form..."})}),(0,r.jsxs)(H.gC,{children:[o.length>0&&(0,r.jsxs)(H.s3,{children:[(0,r.jsx)(H.TR,{children:"Form Templates"}),o.map(e=>(0,r.jsx)(H.eb,{value:e.id,children:e.title},e.id))]}),o.length>0&&l.length>0&&(0,r.jsx)(H.mi,{}),l.length>0&&(0,r.jsxs)(H.s3,{children:[(0,r.jsx)(H.TR,{children:"My Custom Forms"}),l.map(e=>(0,r.jsx)(H.eb,{value:e.id,children:e.title},e.id))]}),(o.length>0||l.length>0)&&(0,r.jsx)(H.mi,{}),(0,r.jsx)(H.s3,{children:(0,r.jsx)(H.eb,{value:"create-new-form",className:"text-primary focus:text-primary",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(F.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Create Custom Form"})]})})}),0===e.length&&(0,r.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No forms available."})]})]})}var D=s(70569),Z=s(98599),O=s(11273),_=s(65551),V=s(83721),J=s(18853),L=s(3416),Y="Switch",[W,X]=(0,O.A)(Y),[K,Q]=W(Y),ee=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:i,checked:n,defaultChecked:o,required:l,disabled:d,value:c="on",onCheckedChange:u,form:m,...h}=e,[x,p]=a.useState(null),f=(0,Z.s)(t,e=>p(e)),j=a.useRef(!1),g=!x||m||!!x.closest("form"),[b=!1,v]=(0,_.i)({prop:n,defaultProp:o,onChange:u});return(0,r.jsxs)(K,{scope:s,checked:b,disabled:d,children:[(0,r.jsx)(L.sG.button,{type:"button",role:"switch","aria-checked":b,"aria-required":l,"data-state":ea(b),"data-disabled":d?"":void 0,disabled:d,value:c,...h,ref:f,onClick:(0,D.m)(e.onClick,e=>{v(e=>!e),g&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})}),g&&(0,r.jsx)(er,{control:x,bubbles:!j.current,name:i,value:c,checked:b,required:l,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});ee.displayName=Y;var et="SwitchThumb",es=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,i=Q(et,s);return(0,r.jsx)(L.sG.span,{"data-state":ea(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})});es.displayName=et;var er=e=>{let{control:t,checked:s,bubbles:i=!0,...n}=e,o=a.useRef(null),l=(0,V.Z)(s),d=(0,J.X)(t);return a.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(l!==s&&t){let r=new Event("click",{bubbles:i});t.call(e,s),e.dispatchEvent(r)}},[l,s,i]),(0,r.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...n,tabIndex:-1,ref:o,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ea(e){return e?"checked":"unchecked"}let ei=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(ee,{className:(0,z.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:(0,r.jsx)(es,{className:(0,z.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));ei.displayName=ee.displayName;var en=s(80013),eo=s(71669),el=s(89667),ed=s(76242);let ec=x.Ik({brandCode:x.Yj().min(1,"Please select a brand."),amountSelection:x.Yj(),customAmount:x.ai().optional(),autoSend:x.zM(),selectedBrand:x.Ie().optional()}).refine(e=>{if(!e.selectedBrand||"custom"!==e.amountSelection)return!0;if(void 0===e.customAmount||null===e.customAmount||e.customAmount<=0||!e.selectedBrand.denominations||0===e.selectedBrand.denominations.length)return!1;let t=100*e.customAmount,s=e.selectedBrand.denominations[0].min,r=e.selectedBrand.denominations[0].max;return t>=s&&t<=r},{message:"Custom amount is not within the allowed range for this brand.",path:["customAmount"]}).refine(e=>"custom"!==e.amountSelection||void 0!==e.customAmount&&e.customAmount>0,{message:"A custom amount is required.",path:["customAmount"]}),eu=x.Ik({streetNumber:x.Yj().min(1,"Street number is required."),streetName:x.Yj().min(1,"Street name is required."),unitNumber:x.Yj().optional(),city:x.Yj().min(1,"City is required."),state:x.Yj().min(2,"State is required.").max(2,"Use 2-letter abbreviation."),zipCode:x.Yj().min(5,"Zip code must be 5 digits.").max(5,"Zip code must be 5 digits.")});function em(){let{user:e,loading:t}=(0,l.A)(),s=(0,d.useRouter)(),u=(0,d.useParams)(),{toast:x}=(0,v.dj)(),[y,z]=(0,a.useState)(null),[F,D]=(0,a.useState)([]),[Z,O]=(0,a.useState)([]),[_,V]=(0,a.useState)(!0),[J,L]=(0,a.useState)(null),[Y,W]=(0,a.useState)(!1),[X,K]=(0,a.useState)([]),[Q,ee]=(0,a.useState)([]),[et,es]=(0,a.useState)(!0),[er,ea]=(0,a.useState)(!1),em=(0,a.useRef)(null),[eh,ex]=(0,a.useState)(!1),[ep,ef]=(0,a.useState)(!1),[ej,eg]=(0,a.useState)(!1),eb=u.id,ev=(0,h.mN)({resolver:(0,p.u)(eu),defaultValues:{streetNumber:"",streetName:"",unitNumber:"",city:"",state:"",zipCode:""}}),ey=(0,h.mN)({resolver:(0,p.u)(ec)}),ew=ey.watch("amountSelection"),eN=ey.watch("brandCode");(0,a.useMemo)(()=>{let e=y?.giftAutomation?.amountInCents;return void 0===e?"500":[500,1e3,1500].includes(e)?String(e):"custom"},[y?.giftAutomation?.amountInCents]),(0,a.useMemo)(()=>Z.find(e=>e.brand_code===eN),[Z,eN]);let ek=(0,a.useCallback)(async()=>{if(e&&eb){V(!0),es(!0),L(null);try{let t=(0,i.H9)(o.db,"openHouses",eb),s=await (0,i.x7)(t);if(s.exists()){let t={id:s.id,...s.data()};if(t.userId!==e.uid)L("You don't have permission to view this page."),z(null);else{z(t);try{let e=await (0,j.f)();O(e)}catch(e){console.error("Could not fetch Giftbit brands:",e),O([])}ey.reset({brandCode:t.giftAutomation?.brandCode,amountSelection:t.giftAutomation?.amountInCents?String(t.giftAutomation.amountInCents):"500",customAmount:t.giftAutomation?.amountInCents?t.giftAutomation.amountInCents/100:void 0,autoSend:t.giftAutomation?.autoSend||!1});let s=(0,i.query)((0,i.collection)(o.db,"feedbackForms"),(0,i.where)("type","==","global")),r=(0,i.query)((0,i.collection)(o.db,"feedbackForms"),(0,i.where)("type","==","custom"),(0,i.where)("userId","==",e.uid)),[a,n]=await Promise.all([(0,i.getDocs)(s),(0,i.getDocs)(r)]),l=[...a.docs.map(e=>({id:e.id,...e.data()})),...n.docs.map(e=>({id:e.id,...e.data()}))];D(l);let d=(0,i.query)((0,i.collection)(o.db,"leads"),(0,i.where)("openHouseId","==",eb),(0,i.where)("userId","==",e.uid)),c=(0,i.query)((0,i.collection)(o.db,"feedbackSubmissions"),(0,i.where)("openHouseId","==",eb),(0,i.where)("userId","==",e.uid)),[u,m]=await Promise.all([(0,i.getDocs)(d),(0,i.getDocs)(c)]);K(u.docs.map(e=>e.data())),ee(m.docs.map(e=>e.data()))}}else L("Open house not found."),z(null)}catch(e){console.error("Error fetching document:",e),"permission-denied"===e.code?L("You do not have permission to view these records."):L("Failed to fetch open house details."),z(null)}finally{V(!1),es(!1)}}},[eb,e,ey]),eC=async(e,t)=>{let s=(0,i.H9)(o.db,"openHouses",e);try{await (0,i.mZ)(s,{feedbackFormId:t}),await ek()}catch(e){console.error("Error setting feedback form:",e)}},eA=async t=>{if(!e)return;let s=(0,i.wP)(o.db),r=(0,i.query)((0,i.collection)(o.db,"openHouses"),(0,i.where)("userId","==",e.uid),(0,i.where)("isActive","==",!0));(await (0,i.getDocs)(r)).forEach(e=>{e.id!==t&&s.update(e.ref,{isActive:!1})});let a=(0,i.H9)(o.db,"openHouses",t);s.update(a,{isActive:!0});try{await s.commit(),await ek()}catch(e){console.error("Error setting active open house:",e)}},eS=async()=>{if(e&&y){W(!0);try{if(y.imageUrl){let e=(0,n.KR)(o.IG,y.imageUrl);await (0,n.XR)(e).catch(e=>{if("storage/object-not-found"!==e.code)throw e})}await (0,i.kd)((0,i.H9)(o.db,"openHouses",y.id)),s.push("/user/dashboard")}catch(e){console.error("Error deleting open house:",e),W(!1)}}};async function eI(t){if(!e||!y)return;let{streetNumber:s,streetName:r,unitNumber:a,city:n,state:l,zipCode:d}=t,c=`${s} ${r}${a?` #${a}`:""}, ${n}, ${l.toUpperCase()} ${d}`;try{let e=(0,i.H9)(o.db,"openHouses",y.id);await (0,i.mZ)(e,{address:c,structuredAddress:t}),ea(!1),await ek()}catch(e){console.error("Error updating address:",e)}}let eE=async t=>{if(!t.target.files||0===t.target.files.length||!e||!y)return;let s=t.target.files[0];if(s.size>5242880)return;ex(!0);let r=(0,n.KR)(o.IG,`open-house-images/${e.uid}/${y.id}/${(0,f.A)()}`);try{let e=await (0,n.D)(r,s),t=await (0,n.qk)(e.ref),a=(0,i.H9)(o.db,"openHouses",y.id);await (0,i.mZ)(a,{imageUrl:t}),z(e=>e?{...e,imageUrl:t}:null)}catch(e){console.error("Error uploading image:",e)}finally{ex(!1)}},eR=async()=>{if(y&&y.imageUrl)try{let e=(0,n.KR)(o.IG,y.imageUrl);await (0,n.XR)(e);let t=(0,i.H9)(o.db,"openHouses",y.id);await (0,i.mZ)(t,{imageUrl:null}),z(e=>e?{...e,imageUrl:void 0}:null)}catch(e){console.error("Error removing image:",e)}finally{ef(!1)}},eq=async e=>{if(!y)return;let t={...e,selectedBrand:Z.find(t=>t.brand_code===e.brandCode)},s=ec.safeParse(t);if(!s.success)return void s.error.errors.forEach(e=>{let t=e.path[0];ey.setError(t,{type:"manual",message:e.message})});let r=(0,i.H9)(o.db,"openHouses",y.id),a=0;a="custom"===e.amountSelection?e.customAmount?100*e.customAmount:0:parseInt(e.amountSelection,10);try{let t={enabled:!0,autoSend:e.autoSend,brandCode:e.brandCode,amountInCents:a};await (0,i.mZ)(r,{giftAutomation:t}),await ek(),eg(!1),x({title:"Success",description:"Gift automation settings have been updated."})}catch(e){console.error("Error updating gift settings:",e),x({variant:"destructive",title:"Error",description:"Could not save gift automation settings."})}},eU=async e=>{if(!y)return;let t=(0,i.H9)(o.db,"openHouses",y.id);try{let s;s=e?{...y.giftAutomation,enabled:!0,brandCode:y.giftAutomation?.brandCode||Z[0]?.brand_code,amountInCents:y.giftAutomation?.amountInCents||500,autoSend:y.giftAutomation?.autoSend||!1}:{...y.giftAutomation,enabled:!1},await (0,i.mZ)(t,{giftAutomation:s}),await ek()}catch(e){console.error("Error updating gift automation:",e)}};if(_||t)return(0,r.jsx)("p",{className:"text-muted-foreground",children:"Loading details..."});if(J)return(0,r.jsx)("p",{className:"text-destructive",children:J});if(!y)return(0,r.jsx)("p",{className:"text-muted-foreground",children:"Open house not found or you do not have permission to view it."});let eP=y.address.split(","),eG=eP[0],e$=eP.length>1?eP.slice(1).join(",").trim():"",eB=y.giftAutomation?.enabled||!1,eM=()=>(0,r.jsxs)(g.Zp,{className:"flex flex-col h-full hover:bg-muted/50 transition-colors",children:[(0,r.jsx)(g.aR,{className:"flex-grow pb-2",children:(0,r.jsxs)("div",{className:"flex flex-row items-center justify-between space-y-0",children:[(0,r.jsx)(g.ZB,{className:"text-sm font-medium",children:"Status"}),(0,r.jsx)(w,{className:"h-4 w-4 text-muted-foreground"})]})}),(0,r.jsx)(g.Wu,{children:y.isActive?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"Active"}),(0,r.jsxs)(M.E,{className:"bg-green-600 text-white hover:bg-green-600",children:[(0,r.jsx)(N.A,{className:"mr-1"})," Live"]})]}):(0,r.jsx)("div",{className:"text-2xl font-bold",children:"Inactive"})})]});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ed.Bc,{children:(0,r.jsxs)("div",{className:"w-full mx-auto space-y-8",children:[(0,r.jsx)("div",{children:(0,r.jsxs)(b.$,{variant:"ghost",onClick:()=>s.back(),className:"mb-4 -ml-4",children:[(0,r.jsx)(k.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Back to Dashboard"})]})}),(0,r.jsxs)("div",{className:"flex flex-col md:flex-row items-start gap-4 md:gap-6",children:[(0,r.jsxs)("div",{className:"w-full md:w-48 h-48 md:h-32 relative rounded-md overflow-hidden border flex-shrink-0 bg-muted group",children:[y.imageUrl?(0,r.jsx)(c.default,{src:y.imageUrl,alt:`Image of ${y.address}`,fill:!0,className:"object-cover","data-ai-hint":"house exterior"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(C.A,{className:"w-12 h-12 text-muted-foreground"})}),(0,r.jsxs)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center gap-2 rounded-md opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)("button",{onClick:()=>em.current?.click(),disabled:eh,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Upload image",children:eh?(0,r.jsx)(A.A,{className:"h-6 w-6 animate-spin"}):(0,r.jsx)(S,{className:"h-6 w-6"})}),y.imageUrl&&(0,r.jsx)("button",{onClick:()=>ef(!0),className:"p-2 rounded-full bg-destructive/80 text-white hover:bg-destructive transition-colors","aria-label":"Remove image",children:(0,r.jsx)(I.A,{className:"h-6 w-6"})})]}),(0,r.jsx)("input",{type:"file",ref:em,onChange:eE,className:"hidden",accept:"image/png, image/jpeg, image/gif"})]}),(0,r.jsxs)("div",{className:"flex-grow pt-1 w-full",children:[(0,r.jsx)("div",{className:"flex flex-col sm:flex-row justify-between sm:items-start",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight font-headline",children:eG}),(0,r.jsx)(b.$,{variant:"ghost",size:"icon",onClick:()=>ea(!0),className:"flex-shrink-0",children:(0,r.jsx)(E.A,{className:"h-5 w-5 text-muted-foreground"})})]}),(0,r.jsx)("p",{className:"text-muted-foreground",children:e$})]})}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Created on ",y.createdAt?new Date(y.createdAt.toDate()).toLocaleDateString():"N/A"]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-3",children:[(0,r.jsx)(g.Zp,{asChild:!0,className:"hover:bg-muted/50 transition-colors h-full",children:(0,r.jsxs)(m(),{href:`/user/my-leads?house=${y.id}`,children:[(0,r.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(g.ZB,{className:"text-sm font-medium",children:"Total Leads"}),(0,r.jsx)(R.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:et?"...":X.length})})]})}),(0,r.jsx)(g.Zp,{asChild:!0,className:"hover:bg-muted/50 transition-colors h-full",children:(0,r.jsxs)(m(),{href:`/user/open-house/${y.id}/feedback`,children:[(0,r.jsxs)(g.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(g.ZB,{className:"text-sm font-medium",children:"Feedback Responses"}),(0,r.jsx)(q.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"text-2xl font-bold",children:et?"...":Q.length})})]})}),(0,r.jsx)("div",{className:"col-span-2 lg:col-span-1",children:y.isActive?(0,r.jsx)(eM,{}):(0,r.jsxs)(G.Lt,{children:[(0,r.jsx)(G.tv,{asChild:!0,children:(0,r.jsx)("button",{className:"w-full h-full text-left",children:(0,r.jsx)(eM,{})})}),(0,r.jsxs)(G.EO,{children:[(0,r.jsxs)(G.wd,{children:[(0,r.jsx)(G.r7,{children:"Make Open House Active?"}),(0,r.jsx)(G.$v,{children:"This will make your QR code direct visitors to this property's feedback form. Any other active open house will be deactivated."})]}),(0,r.jsxs)(G.ck,{children:[(0,r.jsx)(G.Zr,{children:"Cancel"}),(0,r.jsx)(G.Rx,{onClick:()=>eA(y.id),children:"Yes, make active"})]})]})]})})]}),(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(g.Zp,{children:[(0,r.jsxs)(g.aR,{children:[(0,r.jsx)(g.ZB,{children:"Feedback Form"}),(0,r.jsx)(g.BT,{children:"Select which form visitors will see when they scan your QR code for this property."})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsx)("div",{className:"max-w-md",children:(0,r.jsx)(T,{forms:F,selectedFormId:y.feedbackFormId,onFormSelect:e=>eC(y.id,e),triggerClassName:"w-full"})})})]}),(0,r.jsxs)(g.Zp,{children:[(0,r.jsxs)(g.aR,{children:[(0,r.jsx)(g.ZB,{children:"Gifts"}),(0,r.jsx)(g.BT,{children:"Reward visitors for their feedback. When enabled, gifts are queued in your log for you to approve."})]}),(0,r.jsx)(g.Wu,{className:"space-y-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)(en.J,{htmlFor:"enable-gifts-switch",className:"font-semibold text-base",children:"Enable Gifts"})}),(0,r.jsx)(ei,{id:"enable-gifts-switch",checked:eB,onCheckedChange:eU})]})}),eB&&(0,r.jsx)(g.wL,{children:(0,r.jsxs)(b.$,{variant:"secondary",className:"w-full",onClick:()=>eg(!0),children:[(0,r.jsx)(U.A,{className:"mr-2"}),"Edit Gift Settings"]})})]})]}),(0,r.jsx)(B.w,{}),(0,r.jsxs)(g.Zp,{className:"border-destructive",children:[(0,r.jsxs)(g.aR,{children:[(0,r.jsx)(g.ZB,{className:"text-destructive",children:"Danger Zone"}),(0,r.jsx)(g.BT,{children:"This is a permanent action and cannot be undone."})]}),(0,r.jsx)(g.Wu,{children:(0,r.jsxs)(G.Lt,{children:[(0,r.jsx)(G.tv,{asChild:!0,children:(0,r.jsxs)(b.$,{variant:"destructive",children:[(0,r.jsx)(I.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)("span",{children:"Delete Open House"})]})}),(0,r.jsxs)(G.EO,{children:[(0,r.jsxs)(G.wd,{children:[(0,r.jsx)(G.r7,{children:"Are you absolutely sure?"}),(0,r.jsx)(G.$v,{children:"This action cannot be undone. This will permanently delete your open house listing and all associated lead logs."})]}),(0,r.jsxs)(G.ck,{children:[(0,r.jsx)(G.Zr,{disabled:Y,children:"Cancel"}),(0,r.jsx)(G.Rx,{onClick:eS,disabled:Y,className:"bg-destructive hover:bg-destructive/90",children:Y?"Deleting...":"Yes, delete it"})]})]})]})})]})]})}),(0,r.jsx)($.lG,{open:ej,onOpenChange:eg,children:(0,r.jsxs)($.Cf,{children:[(0,r.jsxs)($.c7,{children:[(0,r.jsx)($.L3,{children:"Gift Automation Settings"}),(0,r.jsx)($.rr,{children:"Configure the gift that will be sent to visitors who provide feedback."})]}),(0,r.jsx)(eo.lV,{...ey,children:(0,r.jsxs)("form",{onSubmit:ey.handleSubmit(eq),className:"space-y-4 py-2",children:[(0,r.jsx)(eo.zB,{control:ey.control,name:"brandCode",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"Brand"}),(0,r.jsxs)(H.l6,{onValueChange:e.onChange,defaultValue:e.value,children:[(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(H.bq,{children:(0,r.jsx)(H.yv,{placeholder:"Select brand"})})}),(0,r.jsx)(H.gC,{children:Z.map(e=>(0,r.jsx)(H.eb,{value:e.brand_code,className:"capitalize",children:e.name},e.brand_code))})]}),(0,r.jsx)(eo.C5,{})]})}),(0,r.jsxs)("div",{className:"flex gap-4 items-end",children:[(0,r.jsx)(eo.zB,{control:ey.control,name:"amountSelection",render:({field:e})=>(0,r.jsxs)(eo.eI,{className:"flex-1",children:[(0,r.jsx)(eo.lR,{children:"Amount"}),(0,r.jsxs)(H.l6,{onValueChange:e.onChange,defaultValue:e.value,disabled:!eN,children:[(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(H.bq,{children:(0,r.jsx)(H.yv,{placeholder:"Select amount"})})}),(0,r.jsxs)(H.gC,{children:[(0,r.jsx)(H.eb,{value:"500",children:"$5.00"}),(0,r.jsx)(H.eb,{value:"1000",children:"$10.00"}),(0,r.jsx)(H.eb,{value:"1500",children:"$15.00"}),(0,r.jsx)(H.eb,{value:"custom",children:"Custom"})]})]}),(0,r.jsx)(eo.C5,{})]})}),"custom"===ew&&(0,r.jsx)(eo.zB,{control:ey.control,name:"customAmount",render:({field:e})=>(0,r.jsxs)(eo.eI,{className:"w-28",children:[(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{type:"number",placeholder:"USD",step:"1",...e,onChange:t=>{let s=t.target.value;e.onChange(""===s?void 0:parseFloat(s))}})}),(0,r.jsx)(eo.C5,{})]})})]}),(0,r.jsx)(eo.zB,{control:ey.control,name:"autoSend",render:({field:e})=>(0,r.jsxs)(eo.eI,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm mt-4",children:[(0,r.jsxs)("div",{className:"space-y-0.5",children:[(0,r.jsxs)(eo.lR,{className:"flex items-center gap-2",children:[(0,r.jsx)(P.A,{className:"h-5 w-5 text-yellow-500"}),"Auto-Send Gifts"]}),(0,r.jsx)(eo.Rr,{children:"Automatically send gifts and spend money from your balance."})]}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(ei,{checked:e.value,onCheckedChange:e.onChange})})]})}),(0,r.jsxs)($.Es,{className:"pt-4",children:[(0,r.jsx)(b.$,{type:"button",variant:"ghost",onClick:()=>eg(!1),children:"Cancel"}),(0,r.jsx)(b.$,{type:"submit",disabled:ey.formState.isSubmitting,children:ey.formState.isSubmitting?"Saving...":"Save Settings"})]})]})})]})}),(0,r.jsx)($.lG,{open:er,onOpenChange:ea,children:(0,r.jsxs)($.Cf,{children:[(0,r.jsxs)($.c7,{children:[(0,r.jsx)($.L3,{children:"Edit Address"}),(0,r.jsx)($.rr,{children:"Update the address details for this open house."})]}),(0,r.jsx)(eo.lV,{...ev,children:(0,r.jsxs)("form",{onSubmit:ev.handleSubmit(eI),className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsx)(eo.zB,{control:ev.control,name:"streetNumber",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"Number"}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{...e})}),(0,r.jsx)(eo.C5,{})]})})}),(0,r.jsx)("div",{className:"col-span-3",children:(0,r.jsx)(eo.zB,{control:ev.control,name:"streetName",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"Street Name"}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{...e})}),(0,r.jsx)(eo.C5,{})]})})})]}),(0,r.jsx)(eo.zB,{control:ev.control,name:"unitNumber",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"Unit Number (Optional)"}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{...e})}),(0,r.jsx)(eo.C5,{})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsx)("div",{className:"col-span-2",children:(0,r.jsx)(eo.zB,{control:ev.control,name:"city",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"City"}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{...e})}),(0,r.jsx)(eo.C5,{})]})})}),(0,r.jsx)(eo.zB,{control:ev.control,name:"state",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"State"}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{...e})}),(0,r.jsx)(eo.C5,{})]})})]}),(0,r.jsx)(eo.zB,{control:ev.control,name:"zipCode",render:({field:e})=>(0,r.jsxs)(eo.eI,{children:[(0,r.jsx)(eo.lR,{children:"Zip Code"}),(0,r.jsx)(eo.MJ,{children:(0,r.jsx)(el.p,{...e})}),(0,r.jsx)(eo.C5,{})]})}),(0,r.jsxs)($.Es,{className:"pt-4",children:[(0,r.jsx)(b.$,{type:"button",variant:"ghost",onClick:()=>ea(!1),children:"Cancel"}),(0,r.jsx)(b.$,{type:"submit",disabled:ev.formState.isSubmitting,children:ev.formState.isSubmitting?"Saving...":"Save Address"})]})]})})]})}),(0,r.jsx)(G.Lt,{open:ep,onOpenChange:ef,children:(0,r.jsxs)(G.EO,{children:[(0,r.jsxs)(G.wd,{children:[(0,r.jsx)(G.r7,{children:"Are you sure?"}),(0,r.jsx)(G.$v,{children:"This will permanently remove the image for this open house. This action cannot be undone."})]}),(0,r.jsxs)(G.ck,{children:[(0,r.jsx)(G.Zr,{children:"Cancel"}),(0,r.jsx)(G.Rx,{onClick:eR,className:"bg-destructive hover:bg-destructive/90",children:"Yes, remove image"})]})]})})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11516:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},13931:(e,t,s)=>{"use strict";s.r(t),s.d(t,{"002a7ac215804b5b9787d8ab7a455cdcccc8da7d92":()=>r.f,"4081e086d4e3312f210c0d3065f4c3e33607127821":()=>r.V});var r=s(76732)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21631:(e,t,s)=>{Promise.resolve().then(s.bind(s,6981))},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35137:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},35265:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},37366:e=>{"use strict";e.exports=require("dns")},52682:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/user/open-house/[id]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/user/open-house/[id]/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},55817:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},57207:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},61294:(e,t,s)=>{"use strict";s.d(t,{f:()=>a});var r=s(6475);let a=(0,r.createServerReference)("002a7ac215804b5b9787d8ab7a455cdcccc8da7d92",r.callServer,void 0,r.findSourceMapURL,"listBrands")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63503:(e,t,s)=>{"use strict";s.d(t,{Cf:()=>m,Es:()=>x,L3:()=>p,c7:()=>h,lG:()=>l,rr:()=>f,zM:()=>d});var r=s(60687),a=s(43210),i=s(10991),n=s(78726),o=s(4780);let l=i.bL,d=i.l9,c=i.ZL;i.bm;let u=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.hJ,{ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=i.hJ.displayName;let m=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(i.UC,{ref:a,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,r.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(n.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=i.UC.displayName;let h=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});h.displayName="DialogHeader";let x=({className:e,...t})=>(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let p=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.hE,{ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=i.hE.displayName;let f=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i.VY,{ref:s,className:(0,o.cn)("text-sm text-muted-foreground",e),...t}));f.displayName=i.VY.displayName},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},74112:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var r=s(55511),a=s.n(r);let i={randomUUID:a().randomUUID},n=new Uint8Array(256),o=n.length,l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));let d=function(e,t,s){if(i.randomUUID&&!t&&!e)return i.randomUUID();let r=(e=e||{}).random||(e.rng||function(){return o>n.length-16&&(a().randomFillSync(n),o=0),n.slice(o,o+=16)})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){s=s||0;for(let e=0;e<16;++e)t[s+e]=r[e];return t}return function(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}(r)}},76732:(e,t,s)=>{"use strict";s.d(t,{V:()=>n,f:()=>i});var r=s(91199);async function a(e,t={}){let s="eyJ0eXAiOiJKV1QiLCJhbGciOiJTSEEyNTYifQ==.ODd4SlFkOHQzSExrSUkwRWt3Ukg2Vnd4VGtXeWFwekpUakQ3bGVCRDBWTlFXTGppNDYwemFqcDFDSUt3Vmw5RG45bjdwMXVOSWpnWit6eVhxNTNrVFlWUmtqdjU0UHhMOHV4WWg5K0gwdkpaWCt2c2hoUnZwUk14MHpOcWhpT0w=.EIJaClEnkJ7QVicP9MN0IyOrrGVBPB1oXCXSc6LDULU=";if(!s)throw Error("Giftbit API key is not configured on the server. Please add GIFTBIT_API_KEY to your environment variables.");let r={Authorization:`Bearer ${s}`,"Content-Type":"application/json",...t.headers};try{let s=await fetch(`https://api-testbed.giftbit.com/papi/v1/${e}`,{...t,headers:r});if(!s.ok){let e;try{e=await s.json(),console.error(`Giftbit API Error (${s.status}):`,e);let t=e.error?.message||JSON.stringify(e);throw Error(`Giftbit API request failed with status ${s.status}. Details: ${t}`)}catch(t){throw e=await s.text(),console.error(`Giftbit API Error (${s.status}): ${e}`),Error(`Giftbit API request failed with status ${s.status}. Body: ${e}`)}}if(204===s.status)return null;return s.json()}catch(e){if(console.error("Full error in fetchGiftbitAPI:",e),e.cause)throw Error(`The request to Giftbit failed. This could be due to a network issue or a project configuration problem (like needing the Blaze plan on Firebase). Original error: ${e.message} - Cause: ${JSON.stringify(e.cause)}`);throw Error(`The request to Giftbit failed. Error: ${e.message}`)}}async function i(){try{return(await a("brands?min_price=500")).brands}catch(e){return console.error("Failed to list brands from Giftbit:",e),[]}}async function n(e){let t=await a("direct_links",{method:"POST",body:JSON.stringify(e)});if(!t.directlinks||0===t.directlinks.length)throw Error("Giftbit direct_links created, but no links were returned.");let s=t.directlinks[0].link;if(!s)throw Error("Giftbit direct_links created, but the claim URL is missing.");return{claim_url:s}}s(42087),(0,s(33331).D)([i,n]),(0,r.A)(i,"002a7ac215804b5b9787d8ab7a455cdcccc8da7d92",null),(0,r.A)(n,"4081e086d4e3312f210c0d3065f4c3e33607127821",null)},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83724:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["user",{children:["open-house",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,52682)),"/home/user/studio/src/app/user/open-house/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,48827)),"/home/user/studio/src/app/user/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,61137)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/user/open-house/[id]/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/user/open-house/[id]/page",pathname:"/user/open-house/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},91367:(e,t,s)=>{Promise.resolve().then(s.bind(s,52682))},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,724,16,306,814,758,245,499,149,999,244,317],()=>s(83724));module.exports=r})();