(()=>{var e={};e.id=503,e.ids=[503],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28270:(e,r,s)=>{Promise.resolve().then(s.bind(s,58709))},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},37366:e=>{"use strict";e.exports=require("dns")},42896:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=s(65239),a=s(48088),n=s(88170),o=s.n(n),i=s(30893),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(r,l);let d={children:["",{children:["user",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,66123)),"/home/user/studio/src/app/user/dashboard/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,48827)),"/home/user/studio/src/app/user/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,61137)),"/home/user/studio/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/user/studio/src/app/user/dashboard/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/user/dashboard/page",pathname:"/user/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},55511:e=>{"use strict";e.exports=require("crypto")},58534:(e,r,s)=>{Promise.resolve().then(s.bind(s,66123))},58709:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>eA});var t,a,n=s(60687),o=s(43210),i=s(75535),l=s(50944),d=s(68504),c=s(29523),u=s(85814),p=s.n(u),h=s(30474),x=s(44493),m=s(24026),f=s(58893),g=s(48206),j=s(18329),v=s(24482),b=s(2093),w=s(96834),y=s(35950);function N({openHouse:e,leadCount:r,feedbackCount:s,onSetActive:t}){if(!e.address)return(0,n.jsx)(x.Zp,{className:"flex flex-col h-full group w-full overflow-hidden",children:(0,n.jsx)("div",{className:"p-4 flex-grow flex flex-col",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Loading address..."})})});let a=e.address.split(","),o=a[0],i=a.length>1?a.slice(1).join(",").trim():"";return(0,n.jsxs)(x.Zp,{className:"flex flex-col h-full group w-full overflow-hidden",children:[(0,n.jsx)(p(),{href:`/user/open-house/${e.id}`,className:"block h-40 w-full relative bg-muted border-b",children:e.imageUrl?(0,n.jsx)(h.default,{src:e.imageUrl,alt:`Image of ${e.address}`,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300","data-ai-hint":"house exterior"}):(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)(m.A,{className:"w-10 h-10 text-muted-foreground"})})}),(0,n.jsxs)("div",{className:"p-4 flex-grow flex flex-col",children:[(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsxs)("div",{className:"flex justify-between items-start gap-2",children:[(0,n.jsxs)("div",{className:"flex-grow",children:[(0,n.jsx)(p(),{href:`/user/open-house/${e.id}`,children:(0,n.jsx)("p",{className:"font-semibold text-lg leading-tight group-hover:underline",children:o})}),i&&(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:i})]}),(0,n.jsx)("div",{className:"flex-shrink-0 mt-1",children:e.isActive?(0,n.jsxs)(w.E,{className:"bg-green-600 text-white hover:bg-green-600",children:[(0,n.jsx)(f.A,{className:"mr-1.5"}),"Active"]}):(0,n.jsx)(c.$,{onClick:()=>t(e.id),size:"sm",variant:"secondary",className:"shadow-sm",children:"Set Active"})})]})}),(0,n.jsx)(y.w,{className:"my-4"}),(0,n.jsxs)("div",{className:"flex items-center flex-wrap gap-x-4 gap-y-2 text-sm text-muted-foreground",children:[(0,n.jsxs)(p(),{href:`/user/my-leads?house=${e.id}`,className:"hover:underline flex items-center gap-2",children:[(0,n.jsx)(g.A,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:[r," ",1===r?"Lead":"Leads"]})]}),(0,n.jsx)(y.w,{orientation:"vertical",className:"h-4 hidden sm:block"}),(0,n.jsxs)(p(),{href:`/user/open-house/${e.id}/feedback`,className:"hover:underline flex items-center gap-2",children:[(0,n.jsx)(j.A,{className:"w-4 h-4"}),(0,n.jsxs)("span",{children:[s," ",1===s?"Entry":"Entries"]})]}),(0,n.jsx)(y.w,{orientation:"vertical",className:"h-4 hidden sm:block"}),(0,n.jsx)(p(),{href:`/user/open-house/${e.id}`,className:"hover:underline flex items-center gap-2",children:e.giftAutomation?.enabled?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.A,{className:"w-4 h-4 text-primary"}),(0,n.jsx)("span",{className:"text-primary font-medium",children:"Gifts On"}),e.giftAutomation.autoSend&&(0,n.jsx)(b.A,{className:"w-4 h-4 text-yellow-500"})]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.A,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"Gifts Off"})]})})]})]})]})}var C=s(71669),A=s(89667),k=s(27605),P=s(63442),E=s(45880),R=s(29867);"function"==typeof SuppressedError&&SuppressedError,t||(t=1),!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(a||(a={}));var S=s(15079),I=s(93500),q=s(82614);let D=(0,q.A)("Power",[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]]),O=(0,q.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),F=(0,q.A)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);var _=s(70569),M=s(98599),H=s(11273),Z=s(31355),L=s(1359),G=s(32547),z=s(96963),$=s(55509),U=s(25028),T=s(46059),W=s(3416),B=o.forwardRef((e,r)=>{let{children:s,...t}=e,a=o.Children.toArray(s),i=a.find(K);if(i){let e=i.props.children,s=a.map(r=>r!==i?r:o.Children.count(e)>1?o.Children.only(null):o.isValidElement(e)?e.props.children:null);return(0,n.jsx)(V,{...t,ref:r,children:o.isValidElement(e)?o.cloneElement(e,void 0,s):null})}return(0,n.jsx)(V,{...t,ref:r,children:s})});B.displayName="Slot";var V=o.forwardRef((e,r)=>{let{children:s,...t}=e;if(o.isValidElement(s)){let e=function(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(s=(r=Object.getOwnPropertyDescriptor(e,"ref")?.get)&&"isReactWarning"in r&&r.isReactWarning)?e.props.ref:e.props.ref||e.ref}(s),a=function(e,r){let s={...r};for(let t in r){let a=e[t],n=r[t];/^on[A-Z]/.test(t)?a&&n?s[t]=(...e)=>{n(...e),a(...e)}:a&&(s[t]=a):"style"===t?s[t]={...a,...n}:"className"===t&&(s[t]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(t,s.props);return s.type!==o.Fragment&&(a.ref=r?(0,M.t)(r,e):e),o.cloneElement(s,a)}return o.Children.count(s)>1?o.Children.only(null):null});V.displayName="SlotClone";var Y=({children:e})=>(0,n.jsx)(n.Fragment,{children:e});function K(e){return o.isValidElement(e)&&e.type===Y}var J=s(65551),Q=s(63376),X=s(11490),ee="Popover",[er,es]=(0,H.A)(ee,[$.Bk]),et=(0,$.Bk)(),[ea,en]=er(ee),eo=e=>{let{__scopePopover:r,children:s,open:t,defaultOpen:a,onOpenChange:i,modal:l=!1}=e,d=et(r),c=o.useRef(null),[u,p]=o.useState(!1),[h=!1,x]=(0,J.i)({prop:t,defaultProp:a,onChange:i});return(0,n.jsx)($.bL,{...d,children:(0,n.jsx)(ea,{scope:r,contentId:(0,z.B)(),triggerRef:c,open:h,onOpenChange:x,onOpenToggle:o.useCallback(()=>x(e=>!e),[x]),hasCustomAnchor:u,onCustomAnchorAdd:o.useCallback(()=>p(!0),[]),onCustomAnchorRemove:o.useCallback(()=>p(!1),[]),modal:l,children:s})})};eo.displayName=ee;var ei="PopoverAnchor";o.forwardRef((e,r)=>{let{__scopePopover:s,...t}=e,a=en(ei,s),i=et(s),{onCustomAnchorAdd:l,onCustomAnchorRemove:d}=a;return o.useEffect(()=>(l(),()=>d()),[l,d]),(0,n.jsx)($.Mz,{...i,...t,ref:r})}).displayName=ei;var el="PopoverTrigger",ed=o.forwardRef((e,r)=>{let{__scopePopover:s,...t}=e,a=en(el,s),o=et(s),i=(0,M.s)(r,a.triggerRef),l=(0,n.jsx)(W.sG.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":eb(a.open),...t,ref:i,onClick:(0,_.m)(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:(0,n.jsx)($.Mz,{asChild:!0,...o,children:l})});ed.displayName=el;var ec="PopoverPortal",[eu,ep]=er(ec,{forceMount:void 0}),eh=e=>{let{__scopePopover:r,forceMount:s,children:t,container:a}=e,o=en(ec,r);return(0,n.jsx)(eu,{scope:r,forceMount:s,children:(0,n.jsx)(T.C,{present:s||o.open,children:(0,n.jsx)(U.Z,{asChild:!0,container:a,children:t})})})};eh.displayName=ec;var ex="PopoverContent",em=o.forwardRef((e,r)=>{let s=ep(ex,e.__scopePopover),{forceMount:t=s.forceMount,...a}=e,o=en(ex,e.__scopePopover);return(0,n.jsx)(T.C,{present:t||o.open,children:o.modal?(0,n.jsx)(ef,{...a,ref:r}):(0,n.jsx)(eg,{...a,ref:r})})});em.displayName=ex;var ef=o.forwardRef((e,r)=>{let s=en(ex,e.__scopePopover),t=o.useRef(null),a=(0,M.s)(r,t),i=o.useRef(!1);return o.useEffect(()=>{let e=t.current;if(e)return(0,Q.Eq)(e)},[]),(0,n.jsx)(X.A,{as:B,allowPinchZoom:!0,children:(0,n.jsx)(ej,{...e,ref:a,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,_.m)(e.onCloseAutoFocus,e=>{e.preventDefault(),i.current||s.triggerRef.current?.focus()}),onPointerDownOutside:(0,_.m)(e.onPointerDownOutside,e=>{let r=e.detail.originalEvent,s=0===r.button&&!0===r.ctrlKey;i.current=2===r.button||s},{checkForDefaultPrevented:!1}),onFocusOutside:(0,_.m)(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),eg=o.forwardRef((e,r)=>{let s=en(ex,e.__scopePopover),t=o.useRef(!1),a=o.useRef(!1);return(0,n.jsx)(ej,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{e.onCloseAutoFocus?.(r),r.defaultPrevented||(t.current||s.triggerRef.current?.focus(),r.preventDefault()),t.current=!1,a.current=!1},onInteractOutside:r=>{e.onInteractOutside?.(r),r.defaultPrevented||(t.current=!0,"pointerdown"===r.detail.originalEvent.type&&(a.current=!0));let n=r.target;s.triggerRef.current?.contains(n)&&r.preventDefault(),"focusin"===r.detail.originalEvent.type&&a.current&&r.preventDefault()}})}),ej=o.forwardRef((e,r)=>{let{__scopePopover:s,trapFocus:t,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...p}=e,h=en(ex,s),x=et(s);return(0,L.Oh)(),(0,n.jsx)(G.n,{asChild:!0,loop:!0,trapped:t,onMountAutoFocus:a,onUnmountAutoFocus:o,children:(0,n.jsx)(Z.qW,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1),children:(0,n.jsx)($.UC,{"data-state":eb(h.open),role:"dialog",id:h.contentId,...x,...p,ref:r,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ev="PopoverClose";function eb(e){return e?"open":"closed"}o.forwardRef((e,r)=>{let{__scopePopover:s,...t}=e,a=en(ev,s);return(0,n.jsx)(W.sG.button,{type:"button",...t,ref:r,onClick:(0,_.m)(e.onClick,()=>a.onOpenChange(!1))})}).displayName=ev,o.forwardRef((e,r)=>{let{__scopePopover:s,...t}=e,a=et(s);return(0,n.jsx)($.i3,{...a,...t,ref:r})}).displayName="PopoverArrow";var ew=s(4780);let ey=o.forwardRef(({className:e,align:r="center",sideOffset:s=4,...t},a)=>(0,n.jsx)(eh,{children:(0,n.jsx)(em,{ref:a,align:r,sideOffset:s,className:(0,ew.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));ey.displayName=em.displayName;let eN=E.Ik({address:E.Yj().min(10,{message:"Please enter a valid address."})}),eC=e=>e instanceof i.Dc?e.toDate():e;function eA(){let{user:e,loading:r,pendingGiftsCount:s}=(0,d.A)(),[t,a]=(0,o.useState)([]),[u,h]=(0,o.useState)(new Map),[m,f]=(0,o.useState)(new Map),[j,b]=(0,o.useState)(!0),{toast:w}=(0,R.dj)(),[y,E]=(0,o.useState)(""),[q,_]=(0,o.useState)("newest"),[M,H]=(0,o.useState)(null),[Z,L]=(0,o.useState)(!1),[G,z]=(0,o.useState)(0),[$,U]=(0,o.useState)(null),T=(0,o.useRef)(null);(0,o.useRef)(null);let W=(0,k.mN)({resolver:(0,P.u)(eN),defaultValues:{address:""}}),B=(0,o.useCallback)(async()=>{if(e){b(!0);try{let r=(0,i.query)((0,i.collection)(l.db,"openHouses"),(0,i.where)("userId","==",e.uid),(0,i.My)("createdAt","desc")),s=(await (0,i.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}));a(s);let t=s.find(e=>e.isActive)||null;U(t);let n=i.Dc.fromDate(new Date(Date.now()-6048e5)),o=(0,i.query)((0,i.collection)(l.db,"leads"),(0,i.where)("userId","==",e.uid),(0,i.where)("createdAt",">=",n)),d=await (0,i.getDocs)(o);if(z(d.size),0===s.length)return void b(!1);let c=s.map(e=>e.id),u=(0,i.query)((0,i.collection)(l.db,"leads"),(0,i.where)("userId","==",e.uid),(0,i.where)("openHouseId","in",c)),p=await (0,i.getDocs)(u),x=new Map;p.forEach(e=>{let r=e.data();x.set(r.openHouseId,(x.get(r.openHouseId)||0)+1)}),h(x);let m=(0,i.query)((0,i.collection)(l.db,"feedbackSubmissions"),(0,i.where)("userId","==",e.uid),(0,i.where)("openHouseId","in",c)),g=await (0,i.getDocs)(m),j=new Map;g.forEach(e=>{let r=e.data();j.set(r.openHouseId,(j.get(r.openHouseId)||0)+1)}),f(j)}catch(e){console.error("Error fetching dashboard data: ",e),w({variant:"destructive",title:"Data Fetch Error",description:"Could not fetch your dashboard data."})}finally{b(!1)}}},[e,w]),V=(0,o.useMemo)(()=>t.filter(e=>e.address.toLowerCase().includes(y.toLowerCase())).sort((e,r)=>{let s=e.createdAt?eC(e.createdAt).getTime():0,t=r.createdAt?eC(r.createdAt).getTime():0;return"newest"===q?t-s:s-r.createdAt.toDate().getTime()}),[t,y,q]);async function Y(r){if(!e)return void w({variant:"destructive",title:"Authentication Error",description:"You must be logged in to create an open house."});try{let s,a=t.length>0;if(e.defaultFormId)s=e.defaultFormId;else{let e=await (0,i.x7)((0,i.H9)(l.db,"settings","appDefaults"));e.exists()&&(s=e.data().defaultGlobalFormId)}let n=await (0,i.gS)((0,i.collection)(l.db,"openHouses"),{userId:e.uid,address:r.address,createdAt:i.Dc.now(),isActive:0===t.length,feedbackFormId:s||null});W.reset(),await B(),a&&(H(n.id),L(!0))}catch(e){console.error("Error creating open house: ",e),w({variant:"destructive",title:"Error",description:"Could not create the open house. Please try again."})}}let K=async r=>{if(!e)return;let s=(0,i.wP)(l.db);t.forEach(e=>{if(e.isActive&&e.id!==r){let r=(0,i.H9)(l.db,"openHouses",e.id);s.update(r,{isActive:!1})}});let a=(0,i.H9)(l.db,"openHouses",r);s.update(a,{isActive:!0});try{await s.commit(),await B()}catch(e){console.error("Error setting active open house:",e),w({variant:"destructive",title:"Update Failed",description:"Could not update the active open house. Please try again."})}},J=async e=>{e&&M&&await K(M),L(!1),H(null)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"w-full mx-auto space-y-8",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold tracking-tight font-headline",children:"Dashboard"}),(0,n.jsx)("p",{className:"text-muted-foreground",children:"An overview of your open house activity."})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-4",children:[(0,n.jsx)(x.Zp,{asChild:!0,children:(0,n.jsxs)(p(),{href:"/user/my-leads",children:[(0,n.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(x.ZB,{className:"text-sm font-medium",children:"New Leads (7d)"}),(0,n.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(x.Wu,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:j?"...":G})})]})}),(0,n.jsx)(x.Zp,{asChild:!0,className:s>0?"bg-yellow-50 border-yellow-200 dark:bg-yellow-950/50 dark:border-yellow-800":"",children:(0,n.jsxs)(p(),{href:"/user/gifts",children:[(0,n.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(x.ZB,{className:"text-sm font-medium",children:"Pending Gifts"}),(0,n.jsx)(v.A,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(x.Wu,{children:(0,n.jsx)("div",{className:"text-2xl font-bold",children:j?"...":s})})]})}),(0,n.jsx)(x.Zp,{asChild:!0,className:`col-span-2 ${$?"bg-green-50 border-green-200 dark:bg-green-950/50 dark:border-green-800":""}`,children:(0,n.jsxs)(p(),{href:$?`/user/open-house/${$.id}`:"/user/dashboard",children:[(0,n.jsxs)(x.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(x.ZB,{className:"text-sm font-medium",children:"Active Open House"}),(0,n.jsx)(D,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsx)(x.Wu,{children:j?(0,n.jsx)("div",{className:"text-lg font-bold",children:"..."}):$?(0,n.jsx)("div",{className:"text-lg font-bold truncate",title:$.address,children:$.address.split(",")[0]}):(0,n.jsx)("div",{className:"text-lg font-bold",children:"None"})})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-8 items-start",children:[(0,n.jsxs)(x.Zp,{children:[(0,n.jsx)(x.aR,{children:(0,n.jsx)(x.ZB,{children:"Create a New Open House"})}),(0,n.jsx)(x.Wu,{children:(0,n.jsx)(C.lV,{...W,children:(0,n.jsxs)("form",{onSubmit:W.handleSubmit(Y),className:"flex flex-col sm:flex-row items-start gap-4",children:[(0,n.jsx)(C.zB,{control:W.control,name:"address",render:({field:e})=>(0,n.jsxs)(C.eI,{className:"flex-grow relative form-item-container w-full",children:[(0,n.jsx)(C.lR,{className:"sr-only",children:"Address"}),(0,n.jsx)(C.MJ,{children:(0,n.jsx)(A.p,{placeholder:"123 Main St, Anytown, USA",...e,ref:r=>{e.ref(r),r&&(T.current=r)}})}),(0,n.jsx)(C.C5,{className:"pt-2"})]})}),(0,n.jsx)(c.$,{type:"submit",disabled:W.formState.isSubmitting,className:"w-full sm:w-auto",children:W.formState.isSubmitting?"Creating...":"Create"})]})})})]}),(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold tracking-tight font-headline",children:"Your Open Houses"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)(eo,{children:[(0,n.jsx)(ed,{asChild:!0,children:(0,n.jsx)(c.$,{variant:"outline",size:"icon",children:(0,n.jsx)(O,{className:"h-4 w-4"})})}),(0,n.jsx)(ey,{className:"w-80",align:"end",children:(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("h4",{className:"font-medium leading-none",children:"Search"}),(0,n.jsx)("p",{className:"text-sm text-muted-foreground",children:"Find an open house by its address."})]}),(0,n.jsx)(A.p,{id:"search",placeholder:"Search by address...",value:y,onChange:e=>E(e.target.value),className:"h-9"})]})})]}),(0,n.jsxs)(eo,{children:[(0,n.jsx)(ed,{asChild:!0,children:(0,n.jsx)(c.$,{variant:"outline",size:"icon",children:(0,n.jsx)(F,{className:"h-4 w-4"})})}),(0,n.jsx)(ey,{className:"w-48",align:"end",children:(0,n.jsxs)("div",{className:"grid gap-4",children:[(0,n.jsx)("div",{className:"space-y-2",children:(0,n.jsx)("h4",{className:"font-medium leading-none",children:"Sort by"})}),(0,n.jsxs)(S.l6,{value:q,onValueChange:e=>_(e),children:[(0,n.jsx)(S.bq,{className:"h-9",children:(0,n.jsx)(S.yv,{placeholder:"Sort by"})}),(0,n.jsxs)(S.gC,{children:[(0,n.jsx)(S.eb,{value:"newest",children:"Newest first"}),(0,n.jsx)(S.eb,{value:"oldest",children:"Oldest first"})]})]})]})})]})]})]}),j?(0,n.jsx)("div",{className:"text-center py-16 border-2 border-dashed rounded-lg",children:(0,n.jsx)("p",{className:"text-muted-foreground",children:"Loading your open houses..."})}):V.length>0?(0,n.jsx)("div",{className:"grid gap-6 md:grid-cols-2 xl:grid-cols-3",children:V.map(e=>(0,n.jsx)(N,{openHouse:e,leadCount:u.get(e.id)||0,feedbackCount:m.get(e.id)||0,onSetActive:K},e.id))}):(0,n.jsxs)("div",{className:"text-center py-16 border-2 border-dashed rounded-lg",children:[(0,n.jsx)("h3",{className:"text-xl font-medium",children:"No Open Houses Found"}),(0,n.jsx)("p",{className:"text-muted-foreground mt-2",children:y?"Try a different search term.":"Use the form above to create your first listing."})]})]})]})]}),(0,n.jsx)(I.Lt,{open:Z,onOpenChange:L,children:(0,n.jsxs)(I.EO,{children:[(0,n.jsxs)(I.wd,{children:[(0,n.jsx)(I.r7,{children:"New Open House Created"}),(0,n.jsx)(I.$v,{children:"Would you like to make this new listing the active open house for your QR code?"})]}),(0,n.jsxs)(I.ck,{children:[(0,n.jsx)(I.Zr,{onClick:()=>J(!1),children:"Not now"}),(0,n.jsx)(I.Rx,{onClick:()=>J(!0),children:"Yes, make it active"})]})]})})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66123:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/user/dashboard/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/user/dashboard/page.tsx","default")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,724,16,306,814,758,245,499,999,244,317],()=>s(42896));module.exports=t})();